<!doctype html>
<html lang="en" x-data="app()" :class="{'overflow-hidden': sidebarOpen}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ignite LMS</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            rust: {
              50:'#fdf4f2',100:'#fde8e4',200:'#f8d3cc',300:'#efb7ad',400:'#e19080',
              500:'#cf6f5b',600:'#b35146',700:'#8f3c35',800:'#73332f',900:'#5f2d2b'
            },
            sand: {
              50:'#faf7f3',100:'#f4efe9',200:'#ebe2d8',300:'#dfd1c1',400:'#cbb7a1',
              500:'#b7a089',600:'#9a836c',700:'#7c6957',800:'#645448',900:'#52463c'
            }
          },
          boxShadow: {
            card: '0 1px 2px rgba(15,23,42,.05), 0 12px 24px -8px rgba(15,23,42,.10)'
          },
          borderRadius: {
            xl2: '1.25rem'
          }
        }
      }
    }
  </script>
  <style>[x-cloak]{display:none!important}</style>
</head>
<body class="bg-sand-50 text-slate-800 selection:bg-rust-200/60">

  <div class="min-h-dvh flex">

    <!-- Sidebar -->
    <aside
      class="w-64 bg-white border-r border-sand-200/70 fixed inset-y-0 left-0 z-30 md:static md:translate-x-0 transform transition-transform duration-200"
      :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'">

      <!-- Brand -->
      <div class="px-5 pt-6 pb-4 flex items-center gap-3 border-b border-sand-200/70">
        <div class="h-10 w-10 rounded-full bg-rust-500/90 flex items-center justify-center shadow-card">
          <span class="text-white font-semibold">I</span>
        </div>
        <div>
          <div class="text-slate-900 font-semibold">Ignite</div>
          <div class="text-xs text-slate-500">Fall 2025</div>
        </div>
      </div>

      <!-- Nav (icons + labels) -->
      <nav class="p-2 space-y-1 text-sm flex-1 overflow-y-auto">
        <template x-for="item in [
          {k:'dashboard',label:'Dashboard',  icon:'M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l-2 2m-2-2v10a1 1 0 01-1 1h-3m-3 0V9a1 1 0 011-1h6a1 1 0 011 1v10a1 1 0 01-1 1h-3'},
          {k:'courses',  label:'Courses',    icon:'M4 6h16M4 12h16m-7 6h7'},
          {k:'assignments',label:'Assignments', icon:'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'},
          {k:'quizzes',  label:'Quizzes & Tests', icon:'M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0l-3 3m7-3v4a2 2 0 002 2h2'},
          {k:'grades',   label:'Grades',     icon:'M3 6l7-7 7 7M10 3v18'},
          {k:'ai',       label:'AI Assistant', icon:'M9.333 9.75a2.5 2.5 0 005.334 0 2.5 2.5 0 00-5.334 0zM12 21a9 9 0 110-18 9 9 0 010 18z'}
        ]" :key="item.k">
          <button
            class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
            :class="page===item.k && 'bg-sand-100 text-slate-900 font-semibold'"
            @click="page=item.k">
            <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" :d="item.icon"/>
            </svg>
            <span x-text="item.label"></span>
          </button>
        </template>
      </nav>

      <!-- Separator -->
      <div class="border-t border-sand-200/80 mt-2"></div>

      <!-- Bottom: Profile & Settings + user chip -->
      <div class="p-2 space-y-1 text-sm">
        <button class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
                :class="page==='profile' && 'bg-sand-100 text-slate-900 font-semibold'"
                @click="page='profile'">
          <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          <span>Profile</span>
        </button>

        <button class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
                :class="page==='settings' && 'bg-sand-100 text-slate-900 font-semibold'"
                @click="page='settings'">
          <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.608 3.3 0z" />
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <span>Settings</span>
        </button>
      </div>


      <!-- Separator -->
      <div class="border-t border-sand-200/80 pt-4 mt-2">

        <!-- Bottom profile (non-clickable) -->
          <div class="w-full flex items-center gap-3 px-2.5 py-2.5">
            <div class="flex items-center gap-3">
              <div class="h-9 w-9 rounded-2xl bg-sand-100 flex items-center justify-center">
                <!-- keep a cute static avatar emoji -->
                <span x-text="(profile.firstName||'A').slice(0,1)"></span>
              </div>
              <div>
                <!-- name from profile -->
                <div class="text-xs font-medium text-slate-900"
                    x-text="(profile.firstName || '') + ' ' + (profile.lastName || '')">
                </div>
                <!-- email from profile -->
                <div class="text-[11px] text-slate-500"
                    x-text="profile.email || ''">
                </div>
              </div>
            </div>
          </div>
        </div>   
    
    </aside>


    <!-- Main -->
    <main class="flex-1 md:ml-0 ml-0 md:relative md:left-0 left-0">
      <!-- Mobile top bar -->
      <div class="md:hidden sticky top-0 z-20 bg-white/80 backdrop-blur border-b border-sand-200/70">
        <div class="px-4 py-3 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <button @click="sidebarOpen=!sidebarOpen" class="p-2 rounded-lg hover:bg-sand-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
            </button>
            <div class="font-semibold">Ignite</div>
          </div>
          <div class="text-xs text-slate-500">Fall 2025</div>
        </div>
      </div>

      <div class="max-w-[1200px] mx-auto px-5 sm:px-8 py-8">

        <!-- ================= DASHBOARD TAB ================= -->
        <!-- DASHBOARD (restored with calendar) -->
        <!-- DASHBOARD -->
        <section x-show="page==='dashboard'" x-cloak
          x-data="{
            // --- Left list (matches your screenshot content) ---
            newsItems: [
              { id: 1, title: 'New Computer Science Lab Opens on Campus', kind: 'NEWS', date: 'Oct 20, 2025',
                desc: 'Cutting-edge workspace for students and researchers.',
                img: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=800&auto=format&fit=crop' },
              { id: 2, title: 'Spring 2026 Registration Now Open', kind: 'EVENT', date: 'Oct 18, 2025',
                desc: 'Priority registration ends Nov 1. Check your time slot now!',
                img: 'https://images.unsplash.com/photo-1503676382389-4809596d5290?q=80&w=800&auto=format&fit=crop' },
              { id: 3, title: 'Guest Lecture: The Future of AI in Education', kind: 'NEWS', date: 'Oct 15, 2025',
                desc: 'Prof. Anya Sharma from Tech University to speak on Oct 25.',
                img: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=800&auto=format&fit=crop' },
              { id: 4, title: 'Career Fair 2025: Meet Top Employers', kind: 'EVENT', date: 'Oct 12, 2025',
                desc: 'Explore internship and job opportunities. RSVP by Oct 30.',
                img: 'https://images.unsplash.com/photo-1450101499163-c8848c66ca85?q=80&w=800&auto=format&fit=crop' },
              { id: 5, title: 'New Online Course on Data Science Fundamentals', kind: 'NEWS', date: 'Oct 10, 2025',
                desc: 'Enroll now for an exciting journey into data analytics!',
                img: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=800&auto=format&fit=crop' },
            ],

            // --- Calendar state (October 2025 like your screenshot) ---
            months:['January','February','March','April','May','June','July','August','September','October','November','December'],
            cal:{ year:2025, month:9, picked:15,
              days(){ const d=new Date(this.year,this.month+1,0).getDate(); return [...Array(d)].map((_,i)=>i+1) },
              prev(){ this.month===0?(this.month=11,this.year--):this.month-- },
              next(){ this.month===11?(this.month=0,this.year++):this.month++ }
            },

            // --- Deadlines to dot-mark and list (edit freely) ---
            deadlines:[
              { id:'a1', day:15, type:'Assignment', course:'Advanced Web Development', title:'WebDev Project Proposal Due', time:'11:59 PM', color:'bg-rose-50 text-rose-700 border-rose-200' },
              { id:'q1', day:30, type:'Quiz', course:'Data Structures & Algorithms', title:'Data Structures Chapter 3 Quiz', time:'2:00 PM', color:'bg-sky-50 text-sky-700 border-sky-200' },
              { id:'m1', day:21, type:'Milestone', course:'Linear Algebra', title:'Matrix Project Milestone', time:'5:00 PM', color:'bg-amber-50 text-amber-800 border-amber-200' },
              { id:'r1', day:28, type:'Reminder', course:'Career Center', title:'Resume Review Session', time:'3:00 PM', color:'bg-violet-50 text-violet-700 border-violet-200' },
              { id:'w1', day:9, type:'Workshop', course:'Library', title:'Citation Manager Workshop', time:'10:00 AM', color:'bg-emerald-50 text-emerald-700 border-emerald-200' },
            ],
            hasDeadline(d){ return this.deadlines.some(x => x.day===d && this.cal.month===9 && this.cal.year===2025) },
            todayDeadlines(){ return this.deadlines.filter(x => x.day===this.cal.picked && this.cal.month===9 && this.cal.year===2025) }
          }"
          class="space-y-6">

          <!-- Welcome strip (keeps your theme) -->
          <div class="rounded-2xl bg-rust-500/90 text-white px-6 py-5 shadow-card">
            <div class="flex items-center gap-3">
              <div class="h-10 w-10 rounded-full bg-white/20 grid place-items-center">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6l4 2"/></svg>
              </div>
              <div class="text-xl font-semibold">Welcome back! <span aria-hidden>üëã</span></div>
            </div>
            <div class="mt-2 text-sm text-white/90">Believe in yourself and your abilities! ‚ú®</div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left: Latest News & Events -->
            <div class="lg:col-span-2 rounded-2xl bg-white shadow-card border border-sand-200/70">
              <div class="px-6 pt-5 pb-4">
                <div class="flex items-center gap-2 text-rust-600">
                  <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3"/></svg>
                  <h2 class="text-lg font-semibold text-slate-900">Latest News & Events</h2>
                </div>
              </div>

              <div class="px-4 pb-5 space-y-3">
                <template x-for="item in newsItems" :key="item.id">
                  <div class="rounded-xl border border-sand-200/70 bg-white px-3 py-3">
                    <div class="flex gap-3">
                      <img :src="item.img" class="h-16 w-20 rounded-md object-cover" alt="">
                      <div class="flex-1">
                        <div class="font-medium text-slate-900" x-text="item.title"></div>
                        <div class="mt-1 text-xs font-semibold"
                            :class="item.kind==='NEWS' ? 'text-amber-600' : 'text-emerald-600'"
                            x-text="item.kind"></div>
                        <div class="mt-1 text-xs text-slate-500" x-text="item.date"></div>
                        <p class="mt-1 text-sm text-slate-700" x-text="item.desc"></p>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </div>

            <!-- Right: Important Dates + Calendar + Upcoming list -->
            <div class="rounded-2xl bg-white shadow-card border border-sand-200/70">
              <div class="px-6 pt-5">
                <div class="flex items-center gap-2 text-rust-600">
                  <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3M3 11h18M5 19h14"/></svg>
                  <h2 class="text-lg font-semibold text-slate-900">Important Dates</h2>
                </div>
              </div>

              <!-- Month header -->
              <div class="px-6 pt-3">
                <div class="flex items-center justify-between rounded-xl bg-sand-100 px-3 py-2">
                  <button class="p-1 hover:bg-white rounded-md" @click="cal.prev()">
                    <svg class="h-5 w-5 text-slate-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                  </button>
                  <div class="text-sm font-medium text-slate-900" x-text="months[cal.month] + ' ' + cal.year"></div>
                  <button class="p-1 hover:bg-white rounded-md" @click="cal.next()">
                    <svg class="h-5 w-5 text-slate-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                  </button>
                </div>
              </div>

              <!-- Calendar -->
              <div class="px-6 pb-3">
                <div class="mt-3 grid grid-cols-7 text-center text-xs text-slate-500">
                  <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                </div>
                <div class="mt-1 grid grid-cols-7 gap-1">
                  <template x-for="d in cal.days()" :key="d">
                    <button @click="cal.picked=d"
                      class="relative aspect-square rounded-md text-sm hover:bg-sand-100"
                      :class="cal.picked===d ? 'bg-amber-100 font-semibold text-slate-900' : 'text-slate-700'">
                      <span x-text="d"></span>
                      <!-- red dot for deadlines -->
                      <span x-show="hasDeadline(d)" class="absolute left-1/2 -translate-x-1/2 bottom-1 block h-1.5 w-1.5 rounded-full bg-rose-500"></span>
                    </button>
                  </template>
                </div>
              </div>

              <!-- Upcoming Deadlines for picked day -->
              <div class="px-6 pb-6">
                <div class="text-sm font-semibold text-slate-900">Upcoming Deadlines</div>
                <div class="mt-1 text-xs text-slate-500"
                    x-text="new Date(cal.year,cal.month,cal.picked).toLocaleDateString(undefined,{weekday:'long',year:'numeric',month:'long',day:'numeric'})"></div>

                <div class="mt-3 space-y-3">
                  <template x-if="todayDeadlines().length===0">
                    <div class="text-xs text-slate-500">No deadlines on this day.</div>
                  </template>

                  <template x-for="d in todayDeadlines()" :key="d.id">
                    <div class="rounded-xl border px-3 py-2"
                        :class="d.color">
                      <div class="text-sm font-medium" x-text="d.title"></div>
                      <div class="mt-1 text-xs">
                        <span class="font-semibold" x-text="d.type"></span>
                        <span class="text-slate-500"> ‚Ä¢ </span>
                        <span x-text="d.course"></span>
                        <span class="text-slate-500"> ‚Ä¢ </span>
                        <span x-text="d.time"></span>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </div>
          <!-- Help & Support -->
          <div class="mt-6 rounded-xl2 bg-white border border-sand-200/80 shadow-card px-6 py-5 space-y-4">
            <h2 class="text-base font-semibold text-slate-900">Help &amp; Support</h2>
            <p class="text-sm text-slate-600">
                Having technical issues? Our support team is here to help you.
            </p>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
              <div class="flex items-start gap-2">
                <span class="mt-0.5 text-rust-500">‚úâÔ∏è</span>
                <div>
                  <div class="text-xs uppercase tracking-wide text-slate-500">Email</div>
                  <div class="font-medium text-slate-900">support@ignite.edu</div>
                </div>
              </div>
              <div class="flex items-start gap-2">
                <span class="mt-0.5 text-amber-600">üìû</span>
                <div>
                  <div class="text-xs uppercase tracking-wide text-slate-500">Phone</div>
                  <div class="font-medium text-slate-900">1-800-IGNITE</div>
                </div>
              </div>
              <div class="flex items-start gap-2">
                <span class="mt-0.5 text-slate-600">‚è∞</span>
                <div>
                  <div class="text-xs uppercase tracking-wide text-slate-500">Hours</div>
                  <div class="font-medium text-slate-900">24/7 Support</div>
                </div>
              </div>
            </div>
          </div>
  
        </section>
        <!-- ================= END OF DASHBOARD TAB ================= -->

        <!-- ================= COURSES TAB ================= -->
        <!-- COURSES -->
        <section x-show="page === 'courses'" x-cloak>
          <div class="p-4 md:p-6 max-w-6xl mx-auto space-y-6">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
              <div>
                <h1 class="text-lg md:text-xl font-semibold text-slate-900">Your courses</h1>
                <p class="text-xs text-slate-500 mt-0.5">
                  3 active courses this term ¬∑ CS 401, CS 350, MATH 201
                </p>
              </div>
              <div class="flex flex-wrap items-center gap-2">
                <button class="px-3 py-1.5 rounded-full border border-sand-200 text-xs text-slate-700 bg-white hover:bg-sand-50">
                  Semester: Fall 2025
                </button>
                <button class="px-3 py-1.5 rounded-full border border-sand-200 text-xs text-slate-700 bg-white hover:bg-sand-50">
                  View as cards
                </button>
              </div>
            </div>

            <!-- Course cards -->
            <div class="grid md:grid-cols-3 gap-4">
              <template x-for="card in courseCards" :key="card.id">
                <article class="rounded-2xl bg-white border border-sand-200/80 shadow-card overflow-hidden flex flex-col">
                  <div class="relative h-32">
                    <img
                      :src="card.image"
                      :alt="card.title"
                      class="w-full h-full object-cover" />
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/10 to-transparent"></div>
                    <div class="absolute bottom-2 left-3 right-3 flex items-center justify-between text-[11px] text-white">
                      <span class="px-2 py-0.5 rounded-full bg-slate-900/60 backdrop-blur-sm">
                        <span x-text="card.modules + ' modules'"></span>
                      </span>
                      <span class="px-2 py-0.5 rounded-full bg-slate-900/60 backdrop-blur-sm">
                        <span x-text="card.students + ' students'"></span>
                      </span>
                    </div>
                  </div>

                  <div class="p-4 flex-1 flex flex-col gap-3">
                    <div>
                      <h2 class="text-sm font-semibold text-slate-900" x-text="card.title"></h2>
                      <p class="text-xs text-slate-500 mt-0.5" x-text="card.instructor"></p>
                    </div>
                    <div class="mt-auto flex flex-col gap-1.5 text-[11px] text-slate-600">
                      <div class="flex items-center gap-1.5">
                        <span>‚è∞</span>
                        <span class="truncate" x-text="'Next: ' + card.next"></span>
                      </div>
                      <div class="flex items-center gap-1.5">
                        <span>üè´</span>
                        <span class="truncate" x-text="card.id === 3 ? 'MATH 201 ¬∑ Linear Algebra' : (card.id === 2 ? 'CS 350 ¬∑ Data Structures & Algorithms' : 'CS 401 ¬∑ Advanced Web Development')"></span>
                      </div>
                    </div>
                  </div>

                  <div class="px-4 pb-4">
                    <button
                      class="w-full inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl bg-rust-500 text-xs font-medium text-white hover:bg-rust-600"
                      @click="openCourse(card.id)">
                      <span>View course</span>
                      <span>‚Üí</span>
                    </button>
                  </div>
                </article>
              </template>
            </div>
          </div>
        </section>

        <!-- ================= SINGLE COURSE DETAIL ================= -->
        <section x-show="page === 'course'" x-cloak>
          <div class="p-4 md:p-6 max-w-6xl mx-auto space-y-6">
            <!-- Breadcrumb -->
            <div class="flex items-center justify-between gap-3">
              <div class="flex items-center gap-2 text-xs text-slate-500">
                <button class="hover:text-slate-900" @click="page='courses'">Courses</button>
                <span>/</span>
                <span class="text-slate-900 font-medium" x-text="courseDetail.code || 'Course'"></span>
              </div>
              <button
                class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-sand-200 bg-white text-[11px] text-slate-700 hover:bg-sand-50"
                @click="page='courses'">
                ‚Üê Back to all courses
              </button>
            </div>

            <!-- Header -->
            <div class="rounded-xl2 bg-white border border-sand-200/80 shadow-card p-5 md:p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
              <div class="space-y-1.5">
                <div class="flex items-center gap-2">
                  <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-sand-100 text-[11px] text-slate-700" x-text="courseDetail.code"></span>
                  <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-rust-50 text-[11px] text-rust-700">
                    Active ¬∑ Fall 2025
                  </span>
                </div>
                <h1 class="text-lg md:text-xl font-semibold text-slate-900" x-text="courseDetail.title"></h1>
                <p class="text-xs text-slate-600">
                  <span x-text="courseDetail.instructorName"></span> ¬∑
                  <span x-text="courseDetail.schedule"></span> ¬∑
                  <span x-text="courseDetail.location"></span>
                </p>
              </div>
              <div class="flex flex-wrap items-center gap-2">
                <button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-sand-200 bg-sand-25 text-[11px] text-slate-700 hover:bg-sand-50">
                  üìù View gradebook
                </button>
                <button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-sand-200 bg-sand-25 text-[11px] text-slate-700 hover:bg-sand-50">
                  üìÖ Add to calendar
                </button>
              </div>
            </div>

            <!-- Main content grid -->
            <div class="grid lg:grid-cols-[minmax(0,1.7fr),minmax(0,1.1fr)] gap-5 items-start">
              <!-- Left column: tabs -->
              <section class="rounded-xl2 bg-sand-25 border border-sand-200/80 shadow-card p-4 md:p-5">
                <div class="flex items-center justify-between gap-3 mb-4">
                  <div>
                    <h2 class="text-sm font-semibold text-slate-900">Course resources</h2>
                    <p class="text-[11px] text-slate-500" x-text="courseDetail.title"></p>
                  </div>
                </div>

                <!-- Resource tabs + content -->
                <div class="mt-8">
                  <!-- Tab pills -->
                  <div class="flex flex-wrap gap-2 border-b border-sand-200 pb-3">
                    <template x-for="tab in ['syllabus','slides','materials','dates','tools','textbooks']" :key="tab">
                      <button
                        type="button"
                        @click="courseDetailTab = tab"
                        class="px-4 py-2 text-sm rounded-full border transition shadow-sm"
                        :class="courseDetailTab === tab
                          ? 'bg-rust-500 text-white border-rust-500'
                          : 'bg-sand-50 text-slate-700 border-sand-300 hover:bg-white hover:border-rust-300 hover:text-rust-700'">
                        <span x-text="
                          tab === 'syllabus'  ? 'Syllabus' :
                          tab === 'slides'    ? 'Slides' :
                          tab === 'materials' ? 'Materials' :
                          tab === 'dates'     ? 'Important Dates' :
                          tab === 'tools'     ? 'Software & Tools' :
                                                'Textbooks'
                        "></span>
                      </button>
                    </template>
                  </div>

                  <!-- Tab panels -->
                  <div class="mt-5 space-y-5">
                    <!-- Syllabus -->
                    <div x-show="courseDetailTab === 'syllabus'" x-transition>
                      <div class="space-y-5">
                        <!-- Course Description -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-2 text-slate-900">Course Description</h2>
                          <p class="text-sm text-slate-700 leading-relaxed"
                             x-text="courseDetail.syllabus?.description || 'Course description coming soon.'"></p>
                        </div>

                        <!-- Learning Objectives -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Learning Objectives</h2>
                          <template x-if="courseDetail.syllabus && courseDetail.syllabus.objectives && courseDetail.syllabus.objectives.length">
                            <ul class="list-disc pl-5 text-sm text-slate-700 space-y-1">
                              <template x-for="(obj, idx) in courseDetail.syllabus.objectives" :key="idx">
                                <li x-text="obj"></li>
                              </template>
                            </ul>
                          </template>
                          <template x-if="!courseDetail.syllabus || !courseDetail.syllabus.objectives || !courseDetail.syllabus.objectives.length">
                            <p class="text-sm text-slate-500">Objectives will be posted soon.</p>
                          </template>
                        </div>

                        <!-- Grading Policy -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Grading Policy</h2>
                          <div class="space-y-3">
                            <template x-for="g in courseDetail.syllabus?.grading || []" :key="g.label">
                              <div class="flex items-center justify-between gap-4">
                                <span class="text-sm text-slate-700" x-text="g.label"></span>
                                <div class="flex items-center gap-2 w-40">
                                  <div class="h-1.5 w-full rounded-full bg-sand-200 overflow-hidden">
                                    <div class="h-full bg-rust-500" :style="`width:${g.weight || 0}%`"></div>
                                  </div>
                                  <span class="text-xs text-slate-600" x-text="(g.weight || 0) + '%'"></span>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>

                        <!-- Instructor Info -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Instructor Information</h2>
                          <div class="space-y-1 text-sm text-slate-700">
                            <p>
                              <span class="font-semibold">Name:</span>
                              <span x-text="(courseDetail.syllabus && courseDetail.syllabus.instructor && courseDetail.syllabus.instructor.name) || courseDetail.instructorName"></span>
                            </p>
                            <p>
                              <span class="font-semibold">Email:</span>
                              <span x-text="courseDetail.syllabus?.instructor?.email || 'tba@university.edu'"></span>
                            </p>
                            <p>
                              <span class="font-semibold">Office Hours:</span>
                              <span x-text="courseDetail.syllabus?.instructor?.officeHours || courseDetail.officeHours"></span>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Slides -->
                    <div x-show="courseDetailTab === 'slides'" x-transition>
                      <div class="space-y-3">
                        <template x-if="!courseDetail.slides || !courseDetail.slides.length">
                          <p class="text-sm text-slate-500">Slide decks will be posted as the course progresses.</p>
                        </template>

                        <template x-for="slide in courseDetail.slides || []" :key="slide.title">
                          <div class="rounded-xl2 border border-sand-200 bg-white shadow-card px-4 py-3 flex items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                              <div class="h-10 w-10 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700">
                                üìÑ
                              </div>
                              <div>
                                <div class="font-medium text-sm text-slate-900" x-text="slide.title"></div>
                                <div class="text-xs text-slate-500" x-text="(slide.pages || '') + (slide.pages && slide.date ? ' ‚Ä¢ ' : '') + (slide.date || '')"></div>
                              </div>
                            </div>
                            <div class="flex items-center gap-2">
                              <button
                                class="px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white hover:bg-rust-600"
                                @click="openResource({
                                  title: slide.title,
                                  type: 'PDF slides',
                                  pages: slide.pages,
                                  date: slide.date,
                                  size: slide.size,
                                  url: slide.url
                                })">
                                View
                              </button>
                              <a
                                :href="slide.url || '#'"
                                download
                                class="px-3 py-1.5 rounded-lg border border-rust-200 text-xs font-medium text-rust-700 hover:bg-sand-50">
                                Download
                              </a>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>

                    <!-- Materials -->
                    <div x-show="courseDetailTab === 'materials'" x-transition>
                      <div class="space-y-3">
                        <template x-if="!courseDetail.materials || !courseDetail.materials.length">
                          <p class="text-sm text-slate-500">No additional materials have been uploaded yet.</p>
                        </template>

                        <template x-for="item in courseDetail.materials || []" :key="item.title">
                          <div class="rounded-xl2 border border-sand-200 bg-white shadow-card px-4 py-3 flex items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                              <div class="h-10 w-10 rounded-xl flex items-center justify-center text-slate-700 bg-sand-200">
                                <span class="text-lg"
                                      x-text="item.type === 'VIDEO' ? 'üé•' : (item.type === 'LINK' ? 'üîó' : 'üìÑ')"></span>
                              </div>
                              <div>
                                <div class="font-medium text-sm text-slate-900" x-text="item.title"></div>
                                <div class="flex items-center gap-2 text-[11px] text-slate-500">
                                  <span class="px-2 py-0.5 rounded-full bg-sand-200 text-slate-700" x-text="item.type"></span>
                                  <span x-text="item.meta"></span>
                                  <span x-show="item.date">‚Ä¢</span>
                                  <span x-text="item.date"></span>
                                </div>
                              </div>
                            </div>
                            <div class="flex items-center gap-2">
                              <!-- Internal resources: open fake viewer -->
                              <template x-if="!item.isExternal">
                                <button
                                  class="px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white hover:bg-rust-600"
                                  @click="openResource({
                                    title: item.title,
                                    type: item.type === 'VIDEO' ? 'Video' : 'PDF document',
                                    pages: '',
                                    date: item.date,
                                    size: item.size,
                                    url: item.url
                                  })">
                                  View
                                </button>
                              </template>

                              <!-- External links -->
                              <template x-if="item.isExternal">
                                <a
                                  :href="item.url"
                                  target="_blank"
                                  rel="noopener noreferrer"
                                  class="px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white hover:bg-rust-600">
                                  Open Link
                                </a>
                              </template>

                              <a
                                x-show="item.download"
                                :href="item.url || '#'"
                                download
                                class="px-3 py-1.5 rounded-lg border border-rust-200 text-xs font-medium text-rust-700 hover:bg-sand-50">
                                Download
                              </a>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>

                    <!-- Important Dates -->
                    <div x-show="courseDetailTab === 'dates'" x-transition>
                      <div class="space-y-5">
                        <!-- Upcoming Deadlines -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Upcoming Deadlines</h2>
                          <template x-if="!courseDetail.datesUpcoming || !courseDetail.datesUpcoming.length">
                            <p class="text-sm text-slate-500">No upcoming dates posted yet.</p>
                          </template>
                          <div class="space-y-3">
                            <template x-for="d in courseDetail.datesUpcoming || []" :key="d.title">
                              <div class="rounded-xl2 border border-sand-200 bg-white px-4 py-3 flex items-center justify-between gap-4">
                                <div class="flex items-center gap-3">
                                  <div class="h-10 w-10 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700 text-lg">
                                    <span x-show="d.kind==='assignment'">üìÑ</span>
                                    <span x-show="d.kind==='meeting'">üë•</span>
                                    <span x-show="d.kind==='presentation'">üé§</span>
                                    <span x-show="d.kind==='exam'">‚ö†Ô∏è</span>
                                    <span x-show="!['assignment','meeting','presentation','exam'].includes(d.kind)">üìå</span>
                                  </div>
                                  <div>
                                    <div class="font-medium text-sm text-slate-900" x-text="d.title"></div>
                                    <div class="flex items-center gap-2 text-[11px] text-slate-500">
                                      <span class="px-2 py-0.5 rounded-full bg-sand-100 text-slate-700 capitalize" x-text="d.kind || 'event'"></span>
                                      <span x-text="d.date"></span>
                                      <span x-show="d.time">‚Ä¢</span>
                                      <span x-text="d.time"></span>
                                      <span x-show="d.location">‚Ä¢</span>
                                      <span x-text="d.location"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="text-xs text-slate-600" x-show="d.points">
                                  <span class="font-semibold" x-text="'Points ' + d.points"></span>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>

                        <!-- Complete Timeline -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Completed Work &amp; Past Deadlines</h2>
                          <template x-if="!courseDetail.timeline || !courseDetail.timeline.length">
                            <p class="text-sm text-slate-500">No completed work logged yet.</p>
                          </template>
                          <div class="space-y-3">
                            <template x-for="t in courseDetail.timeline || []" :key="t.title">
                              <div class="rounded-xl2 border border-sand-200 bg-white px-4 py-3 flex items-center justify-between gap-4">
                                <div class="flex items-center gap-3">
                                  <div class="h-10 w-10 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700 text-lg">
                                    üìÑ
                                  </div>
                                  <div>
                                    <div class="font-medium text-sm text-slate-900" x-text="t.title"></div>
                                    <div class="flex items-center gap-2 text-[11px] text-slate-500">
                                      <span class="px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700" x-text="t.status || 'Completed'"></span>
                                      <span class="px-2 py-0.5 rounded-full bg-sand-100 text-slate-700" x-text="t.kind || 'assignment'"></span>
                                      <span x-text="t.date"></span>
                                      <span>‚Ä¢</span>
                                      <span x-text="t.time"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="text-xs text-slate-600" x-show="t.points">
                                  <span class="font-semibold" x-text="'Points ' + t.points"></span>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Software & Tools -->
                    <div x-show="courseDetailTab === 'tools'" x-transition>
                      <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                        <h2 class="font-semibold text-lg mb-3 text-slate-900">Required Software &amp; Tools</h2>
                        <p class="text-sm text-slate-600 mb-4">
                          All software and tools required or recommended for this course. Click ‚ÄúAccess Tool‚Äù to download or open.
                        </p>

                        <template x-if="!courseDetail.tools || !courseDetail.tools.length">
                          <p class="text-sm text-slate-500">No tools have been listed yet.</p>
                        </template>

                        <div class="grid md:grid-cols-2 gap-4">
                          <template x-for="tool in courseDetail.tools || []" :key="tool.name">
                            <div class="rounded-xl2 border border-sand-200 bg-sand-50/70 p-4 flex flex-col gap-3">
                              <div class="flex items-start gap-3">
                                <div class="h-10 w-10 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700 text-lg">
                                  <span x-text="tool.icon || 'üõ†'"></span>
                                </div>
                                <div>
                                  <div class="font-semibold text-sm text-slate-900" x-text="tool.name"></div>
                                  <div class="mt-1">
                                    <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-sand-200 text-[11px] text-slate-700"
                                          x-text="tool.tag || 'Tool'"></span>
                                  </div>
                                  <p class="text-xs text-slate-600 mt-2" x-text="tool.desc"></p>
                                </div>
                              </div>
                              <a
                                class="mt-1 w-full px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white text-center hover:bg-rust-600"
                                :href="tool.url || '#'"
                                target="_blank"
                                rel="noopener noreferrer">
                                Access Tool
                              </a>
                            </div>
                          </template>
                        </div>
                      </div>
                    </div>

                    <!-- Textbooks -->
                    <div x-show="courseDetailTab === 'textbooks'" x-transition>
                      <div class="space-y-5">
                        <!-- Required -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Required Textbooks</h2>
                          <template x-if="!courseDetail.textbooksRequired || !courseDetail.textbooksRequired.length">
                            <p class="text-sm text-slate-500">No required textbooks listed for this course.</p>
                          </template>
                          <div class="space-y-4">
                            <template x-for="book in courseDetail.textbooksRequired || []" :key="book.title">
                              <div class="rounded-xl2 border border-sand-200 bg-sand-50/70 px-4 py-3 flex gap-4">
                                <div class="h-12 w-12 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700 text-xl">
                                  <span x-text="book.icon || 'üìò'"></span>
                                </div>
                                <div class="flex-1">
                                  <div class="font-semibold text-sm text-slate-900" x-text="book.title"></div>
                                  <div class="text-xs text-slate-600" x-text="book.subtitle"></div>
                                  <div class="mt-2 flex flex-wrap gap-2 text-[11px]">
                                    <template x-for="(tag, idx) in book.tags || []" :key="idx">
                                      <span class="px-2 py-0.5 rounded-full"
                                            :class="
                                              tag === 'Required'           ? 'bg-rust-500 text-white' :
                                              tag.includes('Free')         ? 'bg-emerald-100 text-emerald-700' :
                                              tag === 'Optional'           ? 'bg-sand-200 text-slate-700' :
                                                                             'bg-sand-200 text-slate-700'
                                            "
                                            x-text="tag"></span>
                                    </template>
                                  </div>
                                  <p class="text-xs text-slate-600 mt-2" x-text="book.description"></p>
                                  <p class="text-[11px] text-slate-500 mt-1" x-show="book.isbn" x-text="'ISBN: ' + book.isbn"></p>
                                  <div class="mt-3" x-show="book.link && book.link.url">
                                    <a
                                      :href="book.link.url"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      class="inline-block px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white hover:bg-rust-600"
                                      x-text="book.link.label || 'More Info'">
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>

                        <!-- Recommended -->
                        <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 md:p-6">
                          <h2 class="font-semibold text-lg mb-3 text-slate-900">Recommended Textbooks</h2>
                          <template x-if="!courseDetail.textbooksRecommended || !courseDetail.textbooksRecommended.length">
                            <p class="text-sm text-slate-500">No additional recommended books listed.</p>
                          </template>
                          <div class="space-y-4">
                            <template x-for="book in courseDetail.textbooksRecommended || []" :key="book.title">
                              <div class="rounded-xl2 border border-sand-200 bg-sand-50/70 px-4 py-3 flex gap-4">
                                <div class="h-12 w-12 rounded-xl bg-sand-200 flex items-center justify-center text-slate-700 text-xl">
                                  <span x-text="book.icon || 'üìô'"></span>
                                </div>
                                <div class="flex-1">
                                  <div class="font-semibold text-sm text-slate-900" x-text="book.title"></div>
                                  <div class="text-xs text-slate-600" x-text="book.subtitle"></div>
                                  <div class="mt-2 flex flex-wrap gap-2 text-[11px]">
                                    <template x-for="(tag, idx) in book.tags || []" :key="idx">
                                      <span class="px-2 py-0.5 rounded-full bg-sand-200 text-slate-700" x-text="tag"></span>
                                    </template>
                                  </div>
                                  <p class="text-xs text-slate-600 mt-2" x-text="book.description"></p>
                                  <p class="text-[11px] text-slate-500 mt-1" x-show="book.isbn" x-text="'ISBN: ' + book.isbn"></p>
                                  <div class="mt-3" x-show="book.link && book.link.url">
                                    <a
                                      :href="book.link.url"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      class="inline-block px-3 py-1.5 rounded-lg bg-rust-500 text-xs font-medium text-white hover:bg-rust-600"
                                      x-text="book.link.label || 'More Info'">
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> <!-- end tab panels wrapper -->
              </section>

              <!-- Right column: announcements & activity -->
              <aside class="space-y-4">
                <!-- Announcements -->
                <div class="rounded-xl2 bg-white border border-sand-200/80 shadow-card p-4 md:p-5">
                  <div class="flex items-center justify-between mb-3">
                    <h2 class="text-sm font-semibold text-slate-900">Latest announcements</h2>
                    <span class="text-[11px] text-slate-500" x-text="courseDetail.announcements?.length ? courseDetail.announcements.length + ' updates' : 'No new updates'"></span>
                  </div>
                  <div class="space-y-3" x-show="courseDetail.announcements && courseDetail.announcements.length">
                    <template x-for="a in courseDetail.announcements" :key="a.id">
                      <div class="rounded-xl border border-sand-200 px-3 py-2.5">
                        <div class="flex items-center justify-between gap-2 mb-0.5">
                          <div class="text-xs font-semibold text-slate-900" x-text="a.title"></div>
                          <span
                            class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px]"
                            :class="a.priority === 'high'
                              ? 'bg-rust-100 text-rust-800'
                              : 'bg-sand-100 text-slate-700'"
                            x-text="a.priority === 'high' ? 'Important' : 'Update'">
                          </span>
                        </div>
                        <p class="text-[11px] text-slate-600 mb-1" x-text="a.body"></p>
                        <div class="flex items-center gap-2 text-[10px] text-slate-500">
                          <span x-text="a.date"></span>
                          <span>¬∑</span>
                          <span x-text="a.time"></span>
                        </div>
                      </div>
                    </template>
                  </div>
                  <p class="text-xs text-slate-500" x-show="!courseDetail.announcements || !courseDetail.announcements.length">
                    No announcements yet for this course.
                  </p>
                </div>

                <!-- Quick actions -->
                <div class="rounded-xl2 bg-sand-25 border border-sand-200/80 shadow-card p-4 md:p-5 space-y-3">
                  <h2 class="text-sm font-semibold text-slate-900">Quick actions</h2>
                  <div class="space-y-2.5 text-xs">
                    <button class="w-full flex items-center justify-between gap-2 px-3 py-2 rounded-xl border border-sand-200 bg-white hover:bg-sand-50">
                      <div class="flex items-center gap-2">
                        <span>‚¨áÔ∏è</span>
                        <span>Download full syllabus</span>
                      </div>
                      <span class="text-slate-500">PDF</span>
                    </button>
                    <button class="w-full flex items-center justify-between gap-2 px-3 py-2 rounded-xl border border-sand-200 bg-white hover:bg-sand-50">
                      <div class="flex items-center gap-2">
                        <span>üí¨</span>
                        <span>Ask a question on the forum</span>
                      </div>
                      <span class="text-slate-500">CS 401</span>
                    </button>
                    <button class="w-full flex items-center justify-between gap-2 px-3 py-2 rounded-xl border border-sand-200 bg-white hover:bg-sand-50">
                      <div class="flex items-center gap-2">
                        <span>üìß</span>
                        <span>Email the instructor</span>
                      </div>
                      <span class="text-slate-500">Outlook</span>
                    </button>
                  </div>
                </div>

                <!-- Need Help? (IT / installation) -->
                <div class="rounded-xl2 bg-white border border-sand-200 shadow-card p-4 md:p-5 space-y-3">
                    <h2 class="text-sm font-semibold text-slate-900">Need Help?</h2>
                    <p class="text-xs text-slate-600">
                        If you're having trouble installing or accessing any course tools, visit the IT Help Desk or contact your instructor.
                    </p>

                    <div class="flex flex-wrap gap-2 text-xs">
                        <button class="px-3 py-1.5 rounded-full bg-white border border-sand-300 text-slate-700 hover:bg-sand-50">
                          IT Support
                        </button>
                        <button class="px-3 py-1.5 rounded-full bg-white border border-sand-300 text-slate-700 hover:bg-sand-50">
                          Installation Guides
                        </button>
                    </div>
                </div>


                <!-- Textbook Access & Financial Aid -->
                <div class="rounded-xl2 bg-white border border-sand-200 shadow-card p-4 md:p-5 space-y-3">
                    <h2 class="text-sm font-semibold text-slate-900">Textbook Access &amp; Financial Aid</h2>

                    <p class="text-xs text-slate-600">
                        Students with financial need may request textbook assistance or borrow copies through library reserves.
                    </p>

                    <div class="flex flex-wrap gap-2 text-xs">
                        <button class="px-3 py-1.5 rounded-full bg-white border border-sand-300 text-slate-700 hover:bg-sand-50">
                          Financial Aid
                        </button>
                        <button class="px-3 py-1.5 rounded-full bg-white border border-sand-300 text-slate-700 hover:bg-sand-50">
                          Library Reserves
                        </button>
                        <button class="px-3 py-1.5 rounded-full bg-white border border-sand-300 text-slate-700 hover:bg-sand-50">
                          Used Book Exchange
                        </button>
                    </div>

                    <!-- STAT BOXES -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs">
                        <div class="rounded-xl bg-white border border-sand-200 px-3 py-3">
                            <div class="font-medium text-slate-700">Required Books</div>
                            <div class="text-sm font-semibold text-slate-900">3</div>
                        </div>
                        <div class="rounded-xl bg-white border border-sand-200 px-3 py-3">
                            <div class="font-medium text-slate-700">Free Resources</div>
                            <div class="text-sm font-semibold text-slate-900">2</div>
                        </div>
                        <div class="rounded-xl bg-white border border-sand-200 px-3 py-3">
                            <div class="font-medium text-slate-700">Owned Books</div>
                            <div class="text-sm font-semibold text-slate-900">1</div>
                        </div>
                    </div>
                </div>



              </aside>
            </div>
          </div>
        </section>
  

        <!-- ================= END OF COURSES TAB ================= -->

        <!-- ================= ASSIGNMENTS TAB ================= -->
        <section x-show="page === 'assignments'">
          <!-- BRANCH: assignments-tab -->
          <div class="p-6 text-center text-slate-500">Assignments page (to be built)</div>
        </section>
        <!-- ================= END OF ASSIGNMENTS TAB ================= -->

        <!-- ================= QUIZZES TAB ================= -->
        <section x-show="page === 'quizzes'">
          <!-- BRANCH: quizzes-tab -->
          <div class="p-6 text-center text-slate-500">Quizzes page (to be built)</div>
        </section>
        <!-- ================= END OF QUIZZES TAB ================= -->

        <!-- ================= GRADES TAB ================= -->
        <section x-show="page === 'grades'">
          <!-- BRANCH: grades-tab -->
          <div class="p-6 text-center text-slate-500">Grades page (to be built)</div>
        </section>
        <!-- ================= END OF GRADES TAB ================= -->

        <!-- ================= AI ASSISTANT TAB ================= -->
        <!-- AI ASSISTANT -->
        <!-- ================= AI ASSISTANT TAB ================= -->
        <!-- AI ASSISTANT -->
        <section x-show="page==='ai'" x-cloak>
          <!-- BRANCH: ai-assistant-tab -->
          <div class="flex items-center gap-3 mb-6">
            <div class="h-11 w-11 rounded-xl bg-rust-500/90 flex items-center justify-center text-white shadow-card">AI</div>
            <div>
              <h1 class="text-2xl font-bold">AI Teaching Assistant</h1>
              <div class="text-sm text-slate-600">Your personal AI helper for learning, studying, and academic success</div>
            </div>
          </div>

          <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card mb-5">
            <div class="px-5 py-3 text-sm">
              <span class="font-medium">AI-Powered Learning Support</span>
              <span class="text-slate-600">
                ‚Äî Get instant help with questions, lecture summaries, quizzes, and personalized study plans.
              </span>
            </div>
          </div>

          <!-- AI sub-tabs -->
          <div class="flex gap-3 overflow-x-auto pb-2 mb-4">
            <button
              @click="aiTab='chat'"
              class="px-4 py-2 rounded-full border text-sm"
              :class="aiTab==='chat' ? 'bg-sand-100 border-sand-300 font-semibold' : 'bg-white border-sand-200 hover:bg-sand-50'">
              Chat & FAQs
            </button>
            <button
              @click="aiTab='summary'"
              class="px-4 py-2 rounded-full border text-sm"
              :class="aiTab==='summary' ? 'bg-sand-100 border-sand-300 font-semibold' : 'bg-white border-sand-200 hover:bg-sand-50'">
              Summarize
            </button>
            <button
              @click="aiTab='quiz'"
              class="px-4 py-2 rounded-full border text-sm"
              :class="aiTab==='quiz' ? 'bg-sand-100 border-sand-300 font-semibold' : 'bg-white border-sand-200 hover:bg-sand-50'">
              Generate Quiz
            </button>
            <button
              @click="aiTab='plan'"
              class="px-4 py-2 rounded-full border text-sm"
              :class="aiTab==='plan' ? 'bg-sand-100 border-sand-300 font-semibold' : 'bg-white border-sand-200 hover:bg-sand-50'">
              Course Plan
            </button>
          </div>

          <!-- ========== Chat ========== -->
          <div x-show="aiTab==='chat'" x-cloak class="grid lg:grid-cols-3 gap-6">
            <!-- Chat panel -->
            <div class="lg:col-span-2 rounded-xl2 border border-sand-200/70 bg-white shadow-card p-4">
              <div class="h-[420px] overflow-y-auto space-y-3 pr-1" id="chatScroll">
                <template x-for="m in chat.messages" :key="m.id">
                  <div :class="m.role==='user' ? 'text-right' : 'text-left'">
                    <div
                      class="inline-block rounded-2xl px-4 py-2 text-sm"
                      :class="m.role==='user'
                        ? 'bg-rust-500/90 text-white'
                        : 'bg-sand-100 text-slate-800'">
                      <span x-text="m.text"></span>
                    </div>
                  </div>
                </template>

                <!-- Loading bubble -->
                <div x-show="isChatLoading" class="text-left">
                  <div class="inline-block rounded-2xl px-4 py-2 text-sm bg-sand-100 text-slate-700">
                    <span class="inline-flex items-center gap-2">
                      <span class="h-2 w-2 rounded-full bg-slate-400 animate-pulse"></span>
                      <span>AI is thinking‚Ä¶</span>
                    </span>
                  </div>
                </div>
              </div>

              <div class="mt-4 flex gap-2">
                <input
                  x-model="chat.input"
                  @keydown.enter.prevent="sendChat()"
                  class="flex-1 rounded-lg border border-sand-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-rust-300"
                  placeholder="Ask a question‚Ä¶"
                />
                <button
                  @click="sendChat()"
                  class="px-4 py-2 rounded-lg bg-rust-500/90 text-white text-sm hover:bg-rust-600 disabled:opacity-60 disabled:cursor-not-allowed"
                  :disabled="isChatLoading || !chat.input.trim()">
                  <span x-show="!isChatLoading">Send</span>
                  <span x-show="isChatLoading">Sending‚Ä¶</span>
                </button>
              </div>
              <p class="mt-2 text-[11px] text-slate-500">
                Messages are sent to the AI backend API (<code>/api/ai/chat</code>). Don‚Äôt expose any API keys on the client.
              </p>
            </div>

            <!-- FAQ panel -->
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-4">
              <div class="font-semibold mb-3">Quick FAQs</div>
              <div class="space-y-2 text-sm">
                <template x-for="q in faq" :key="q">
                  <button
                    @click="chat.input=q; sendChat()"
                    class="w-full text-left px-3 py-2 rounded-lg border border-sand-200 hover:bg-sand-50 disabled:opacity-60"
                    :disabled="isChatLoading">
                    <span x-text="q"></span>
                  </button>
                </template>
              </div>
              <div class="mt-5 text-xs text-slate-500">
                Pro tip: include course codes (e.g., ‚ÄúCS 401‚Äù) for more accurate help.
              </div>
            </div>
          </div>

          <!-- ========== Summary ========== -->
          <div x-show="aiTab==='summary'" x-cloak class="grid lg:grid-cols-2 gap-6">
            <!-- Left: course + lecture selection -->
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Select Lectures to Summarize</div>
              <p class="text-xs text-slate-500 mb-3">
                Showing your <span class="font-semibold">currently enrolled courses</span> only.
              </p>

              <!-- Only enrolled courses appear here -->
              <div class="grid grid-cols-2 gap-2 text-sm">
                <template x-for="c in courses" :key="c.code">
                  <button
                    class="px-3 py-2 rounded-lg border"
                    :class="selectedCourse===c.code ? 'border-rust-500 bg-sand-100 font-semibold' : 'border-sand-300 hover:bg-sand-50'"
                    @click="selectedCourse=c.code; selectedLectures=[]">
                    <span x-text="c.code"></span>
                  </button>
                </template>
              </div>

              <div class="mt-4">
                <div class="text-xs uppercase tracking-wide text-slate-500 mb-2">Lectures</div>
                <template x-if="currentLectures().length===0">
                  <div class="text-sm text-slate-500">Pick a course to see its lectures.</div>
                </template>
                <div class="space-y-2">
                  <template x-for="l in currentLectures()" :key="l.id">
                    <label
                      class="flex items-center gap-2 text-sm px-3 py-2 rounded-lg border cursor-pointer"
                      :class="selectedLectures.includes(l.id)
                        ? 'border-rust-500 bg-sand-100'
                        : 'border-sand-300 hover:bg-sand-50'">
                      <input
                        type="checkbox"
                        class="accent-rust-500"
                        :value="l.id"
                        @change="toggleLecture(l.id)"
                        :checked="selectedLectures.includes(l.id)">
                      <span x-text="l.title"></span>
                    </label>
                  </template>
                </div>
              </div>

              <button
                @click="generateSummary()"
                class="mt-4 w-full px-4 py-2 rounded-lg bg-rust-500/90 text-white text-sm hover:bg-rust-600 disabled:opacity-60 disabled:cursor-not-allowed"
                :disabled="selectedLectures.length===0 || isSummaryLoading">
                <span x-show="!isSummaryLoading">Generate Summary</span>
                <span x-show="isSummaryLoading">Generating Summary‚Ä¶</span>
              </button>

              <p class="mt-2 text-[11px] text-slate-500">
                This sends <code>courseCode</code> and <code>lectureIds</code> to <code>/api/ai/summary</code>.
              </p>
            </div>

            <!-- Right: summary output -->
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Generated Summary</div>

              <template x-if="isSummaryLoading">
                <div class="text-slate-600 text-sm flex items-center gap-2">
                  <span class="h-3 w-3 rounded-full bg-slate-400 animate-pulse"></span>
                  <span>AI is summarizing your selected lectures‚Ä¶</span>
                </div>
              </template>

              <template x-if="!isSummaryLoading && !summary.html">
                <div class="text-slate-500 text-sm">
                  Select a course and lectures, then click ‚ÄúGenerate Summary‚Äù.
                </div>
              </template>

              <div class="prose prose-sm max-w-none" x-html="summary.html"></div>
            </div>
          </div>

          <!-- ========== Quiz ========== -->
          <div x-show="aiTab==='quiz'" x-cloak class="grid lg:grid-cols-2 gap-6">
            <!-- Left: configure quiz -->
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Configure Quiz Generation</div>
              <p class="text-xs text-slate-500 mb-3">
                Quizzes are generated only from your <span class="font-semibold">enrolled courses and their lectures</span>.
              </p>

              <div class="grid grid-cols-2 gap-2 text-sm">
                <template x-for="c in courses" :key="c.code">
                  <button
                    class="px-3 py-2 rounded-lg border"
                    :class="quiz.course===c.code ? 'border-rust-500 bg-sand-100 font-semibold' : 'border-sand-300 hover:bg-sand-50'"
                    @click="quiz.course=c.code; quiz.lectures=[]">
                    <span x-text="c.code"></span>
                  </button>
                </template>
              </div>

              <div class="mt-4">
                <div class="text-xs uppercase tracking-wide text-slate-500 mb-2">Lectures</div>
                <div class="space-y-2">
                  <template x-for="l in lecturesByCode(quiz.course)" :key="l.id">
                    <label
                      class="flex items-center gap-2 text-sm px-3 py-2 rounded-lg border cursor-pointer"
                      :class="quiz.lectures.includes(l.id)
                        ? 'border-rust-500 bg-sand-100'
                        : 'border-sand-300 hover:bg-sand-50'">
                      <input
                        type="checkbox"
                        class="accent-rust-500"
                        :value="l.id"
                        @change="toggleQuizLecture(l.id)"
                        :checked="quiz.lectures.includes(l.id)">
                      <span x-text="l.title"></span>
                    </label>
                  </template>
                </div>
              </div>

              <button
                @click="generateQuiz()"
                class="mt-4 w-full px-4 py-2 rounded-lg bg-rust-500/90 text-white text-sm hover:bg-rust-600 disabled:opacity-60 disabled:cursor-not-allowed"
                :disabled="quiz.lectures.length===0 || isQuizLoading">
                <span x-show="!isQuizLoading">Generate Quiz</span>
                <span x-show="isQuizLoading">Generating Quiz‚Ä¶</span>
              </button>

              <p class="mt-2 text-[11px] text-slate-500">
                Sends <code>courseCode</code> and <code>lectureIds</code> to <code>/api/ai/quiz</code>.
              </p>
            </div>

            <!-- Right: quiz output -->
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Generated Quiz</div>

              <template x-if="isQuizLoading">
                <div class="text-slate-600 text-sm flex items-center gap-2">
                  <span class="h-3 w-3 rounded-full bg-slate-400 animate-pulse"></span>
                  <span>AI is creating quiz questions‚Ä¶</span>
                </div>
              </template>

              <template x-if="!isQuizLoading && quizOut.length===0">
                <div class="text-slate-500 text-sm">
                  Select a course and lectures, then click ‚ÄúGenerate Quiz‚Äù.
                </div>
              </template>

              <div class="space-y-4">
                <template x-for="(q,idx) in quizOut" :key="idx">
                  <div class="rounded-lg border border-sand-200 p-4">
                    <div class="text-sm font-medium mb-2" x-text="'Q' + (idx+1) + '. ' + q.q"></div>
                    <div class="space-y-1 text-sm">
                      <template x-for="(opt,i) in q.options" :key="i">
                        <label class="flex items-center gap-2">
                          <input type="radio" :name="'q'+idx" class="accent-rust-500">
                          <span x-text="opt"></span>
                        </label>
                      </template>
                    </div>
                    <details class="mt-2 text-xs">
                      <summary class="cursor-pointer text-slate-600">Show answer</summary>
                      <div class="mt-1">
                        <span class="font-medium">Answer:</span>
                        <span x-text="q.answer"></span>
                      </div>
                    </details>
                  </div>
                </template>
              </div>
            </div>
          </div>

          <!-- ========== Course Plan ========== -->
          <div x-show="aiTab==='plan'" x-cloak class="grid lg:grid-cols-2 gap-6">
            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Create Personalized Study Plan</div>

              <label class="block text-sm mb-1 text-slate-700">Your Learning Goals</label>
              <textarea
                x-model="plan.goals"
                class="w-full rounded-lg border border-sand-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-rust-300"
                rows="4"
                placeholder="E.g., Master data structures, improve web development skills, prepare for midterms..."></textarea>

              <label class="block text-sm mt-4 mb-1 text-slate-700">Study Pace & Preferences</label>
              <textarea
                x-model="plan.pace"
                class="w-full rounded-lg border border-sand-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-rust-300"
                rows="3"
                placeholder="E.g., I have 15 hours per week, prefer morning study sessions, need to focus more on CS courses..."></textarea>

              <div class="mt-4 text-xs rounded-lg border border-sand-200 p-3 bg-sand-50">
                <div class="font-medium mb-1">Performance-Based Recommendations</div>
                Your study plan will be optimized based on your current grades and course progress.
              </div>

              <button
                @click="generatePlan()"
                class="mt-4 w-full px-4 py-2 rounded-lg bg-rust-500/90 text-white text-sm hover:bg-rust-600 disabled:opacity-60 disabled:cursor-not-allowed"
                :disabled="isPlanLoading">
                <span x-show="!isPlanLoading">Generate Study Plan</span>
                <span x-show="isPlanLoading">Generating Plan‚Ä¶</span>
              </button>

              <p class="mt-2 text-[11px] text-slate-500">
                This sends your goals & preferences to <code>/api/ai/plan</code>.
              </p>
            </div>

            <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5">
              <div class="font-semibold mb-3">Your Personalized Plan</div>

              <template x-if="isPlanLoading">
                <div class="text-slate-600 text-sm flex items-center gap-2">
                  <span class="h-3 w-3 rounded-full bg-slate-400 animate-pulse"></span>
                  <span>AI is building your weekly plan‚Ä¶</span>
                </div>
              </template>

              <template x-if="!isPlanLoading && planOut.length===0">
                <div class="text-slate-500 text-sm">
                  Enter your learning goals and study preferences to generate a personalized plan tailored to your needs.
                </div>
              </template>

              <div class="space-y-3">
                <template x-for="(p, i) in planOut" :key="i">
                  <div class="rounded-lg border border-sand-200 p-3">
                    <div class="font-medium text-sm" x-text="p.title"></div>
                    <ul class="mt-1 text-sm list-disc list-inside text-slate-700">
                      <template x-for="step in p.steps" :key="step">
                        <li x-text="step"></li>
                      </template>
                    </ul>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </section>
        <!-- ================= END OF AI ASSISTANT TAB ================= -->

        <!-- ================= PROFILE TAB ================= -->
        <!-- PROFILE -->
        <section x-show="page==='profile'" x-cloak>
            <!-- BRANCH: profile-settings -->
            <div x-data="profilePage()" x-init="init()" class="space-y-6">

              <!-- Header -->
              <div class="flex items-center justify-between">
                <div>
                  <h1 class="text-3xl font-extrabold text-slate-900">My Profile</h1>
                  <p class="text-slate-500">Manage your personal information and account settings</p>
                </div>

                <!-- Edit / Save / Cancel -->
                <div class="flex gap-3">
                  <template x-if="!isEditing">
                    <button @click="startEdit()"
                            class="inline-flex items-center gap-2 rounded-lg bg-amber-600 px-4 py-2 text-white hover:bg-amber-700">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712z"/><path d="M3 17.25V21h3.75L19.81 7.94l-3.712-3.712L3 17.25z"/></svg>
                      Edit Profile
                    </button>
                  </template>

                  <template x-if="isEditing">
                    <div class="flex gap-3">
                      <button @click="save()"
                              class="inline-flex items-center gap-2 rounded-lg bg-amber-600 px-4 py-2 text-white hover:bg-amber-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                        Save Changes
                      </button>
                      <button @click="cancel()"
                              class="inline-flex items-center gap-2 rounded-lg bg-white px-4 py-2 text-slate-700 ring-1 ring-slate-300 hover:bg-slate-50">
                        Cancel
                      </button>
                    </div>
                  </template>
                </div>
              </div>

              <!-- Top summary card -->
              <div class="rounded-2xl border border-slate-200 bg-white p-6">
                <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
                  <!-- Left: avatar + name -->
                  <div class="col-span-1 flex items-center gap-5">
                    <div class="grid h-24 w-24 place-items-center rounded-full bg-amber-700 text-2xl font-bold text-white">
                      <span x-text="initials(profile.firstName, profile.lastName)"></span>
                    </div>
                    <div>
                      <h2 class="text-xl font-semibold text-slate-900" x-text="fullName"></h2>
                      <div class="text-slate-500" x-text="profile.major || 'Major'"></div>
                      <span class="mt-1 inline-block rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-800"
                            x-text="profile.year || 'Year'"></span>
                    </div>
                  </div>

                  <!-- Middle: About Me -->
                  <div class="col-span-2">
                    <label class="mb-1 block text-sm font-medium text-slate-700">About Me</label>
                    <template x-if="!isEditing">
                      <p class="rounded-lg border border-slate-200 bg-slate-50 p-3 text-slate-700"
                        x-text="profile.about || 'Tell us about yourself‚Ä¶'"></p>
                    </template>
                    <template x-if="isEditing">
                      <textarea x-model="draft.about" rows="3"
                                class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"></textarea>
                    </template>
                  </div>
                </div>

                <!-- KPIs -->
                <div class="mt-6 grid grid-cols-1 gap-4 md:grid-cols-3">
                  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4">
                    <div class="text-xs uppercase tracking-wide text-slate-500">GPA</div>
                    <div class="text-2xl font-semibold text-slate-900" x-text="profile.gpa || '‚Äî'"></div>
                  </div>
                  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4">
                    <div class="text-xs uppercase tracking-wide text-slate-500">Student ID</div>
                    <div class="text-2xl font-semibold text-slate-900" x-text="profile.studentId || '‚Äî'"></div>
                  </div>
                  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4">
                    <div class="text-xs uppercase tracking-wide text-slate-500">Enrolled</div>
                    <div class="text-2xl font-semibold text-slate-900" x-text="profile.enrolledTerm || '‚Äî'"></div>
                  </div>
                </div>
              </div>

              <!-- Two-column details -->
              <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
                <!-- Personal Information -->
                <div class="space-y-4 rounded-2xl border border-slate-200 bg-white p-6">
                  <div class="mb-1 flex items-center gap-2"><span class="text-amber-600">üë§</span><h3 class="text-lg font-semibold text-slate-900">Personal Information</h3></div>
                  <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">First Name</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.firstName"></p></template>
                      <template x-if="isEditing"><input x-model="draft.firstName" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Last Name</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.lastName"></p></template>
                      <template x-if="isEditing"><input x-model="draft.lastName" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>

                    <div class="md:col-span-2">
                      <label class="mb-1 block text-sm text-slate-600">Email Address</label>
                      <input x-model="draft.email" disabled class="w-full rounded-lg border-slate-200 bg-slate-50 text-slate-500"/>
                      <p class="mt-1 text-xs text-slate-500">Email is fixed to the account you registered with.</p>
                    </div>

                    <div class="md:col-span-2">
                      <label class="mb-1 block text-sm text-slate-600">Phone Number</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.phone || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.phone" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                  </div>
                </div>

                <!-- Academic Information -->
                <div class="space-y-4 rounded-2xl border border-slate-200 bg-white p-6">
                  <div class="mb-1 flex items-center gap-2"><span class="text-amber-600">üéì</span><h3 class="text-lg font-semibold text-slate-900">Academic Information</h3></div>
                  <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Student ID</label>
                      <input x-model="draft.studentId" disabled class="w-full rounded-lg border-slate-200 bg-slate-50 text-slate-500"/>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Year</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.year || '‚Äî'"></p></template>
                      <template x-if="isEditing">
                        <select x-model="draft.year" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500">
                          <option>Freshman</option><option>Sophomore</option><option>Junior</option><option>Senior</option><option>Graduate</option>
                        </select>
                      </template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Major</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.major || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.major" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Minor</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.minor || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.minor" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div class="md:col-span-2">
                      <label class="mb-1 block text-sm text-slate-600">Expected Graduation</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.expectedGrad || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.expectedGrad" placeholder="e.g., Spring 2026" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                  </div>
                </div>

                <!-- Address Information -->
                <div class="space-y-4 rounded-2xl border border-slate-200 bg-white p-6">
                  <div class="mb-1 flex items-center gap-2"><span class="text-amber-600">üìç</span><h3 class="text-lg font-semibold text-slate-900">Address Information</h3></div>
                  <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <div class="md:col-span-2">
                      <label class="mb-1 block text-sm text-slate-600">Street Address</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.street || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.street" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">City</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.city || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.city" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">State</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.state || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.state" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">ZIP Code</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.zip || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.zip" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                    <div>
                      <label class="mb-1 block text-sm text-slate-600">Country</label>
                      <template x-if="!isEditing"><p class="rounded-lg border border-slate-200 bg-slate-50 p-2.5" x-text="profile.country || '‚Äî'"></p></template>
                      <template x-if="isEditing"><input x-model="draft.country" class="w-full rounded-lg border-slate-300 focus:border-amber-500 focus:ring-amber-500"/></template>
                    </div>
                  </div>
                </div>

                <!-- Account Settings -->
                <div class="space-y-4 rounded-2xl border border-slate-200 bg-white p-6">
                  <div class="mb-1 flex items-center gap-2"><span class="text-amber-600">üõ°Ô∏è</span><h3 class="text-lg font-semibold text-slate-900">Account Settings</h3></div>

                  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4">
                    <div class="flex items-center justify-between">
                      <div>
                        <div class="text-sm text-slate-600">Email Verified</div>
                        <div class="text-slate-800">Your email has been verified</div>
                      </div>
                      <div class="grid h-7 w-7 place-items-center rounded-full bg-amber-100 text-amber-700">‚úî</div>
                    </div>
                  </div>

                  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4">
                    <div class="flex items-center justify-between">
                      <div>
                        <div class="text-sm text-slate-600">Account Status</div>
                        <div class="text-slate-800">Active ¬∑ Good Standing</div>
                      </div>
                      <span class="rounded-full bg-emerald-100 px-3 py-1 text-xs font-medium text-emerald-700">Active</span>
                    </div>
                  </div>

                  <div class="space-y-3">
                    <button class="w-full rounded-lg bg-white px-4 py-2 text-left text-slate-700 ring-1 ring-slate-300 hover:bg-slate-50">Change Password</button>
                    <button class="w-full rounded-lg bg-white px-4 py-2 text-left text-slate-700 ring-1 ring-slate-300 hover:bg-slate-50">Update Email Preferences</button>
                    <button class="w-full rounded-lg bg-white px-4 py-2 text-left text-slate-700 ring-1 ring-slate-300 hover:bg-slate-50">Privacy Settings</button>
                  </div>
                </div>
              </div>
            </div>

        </section>
        <!-- ================= END OF PROFILE TAB ================= -->

        <!-- ================= SETTINGS TAB ================= -->
        <!-- SETTINGS -->
        <section x-show="page==='settings'" x-cloak>
          <!-- BRANCH: settings -->
          <h1 class="text-2xl font-bold mb-4">Settings</h1>
          <div class="rounded-xl2 border border-sand-200/70 bg-white shadow-card p-5 max-w-xl">
            <div class="text-sm text-slate-600">Additional preferences can go here.</div>
          </div>
        </section>
        <!-- ================= END OF SETTINGS TAB ================= -->
      </div>
    </main>
  </div>

  <script>
    /* ===========================================================
   IGNITE LMS ‚Äî DATA MODEL REFERENCE (Student LMS only for now)
   -----------------------------------------------------------
   This does NOT change visuals. It just explains data shapes.
   ===========================================================

   STORAGE KEYS (auto-scoped per role):
   ignite_student_profile
   ignite_student_courses
   ignite_student_assignments
   ignite_student_submissions
   ignite_student_grades
   ignite_student_quizzes
   ignite_student_ai_summaries

   Shared arrays in app():
   - news[] ‚Üí dashboard-tab
   - courseCards[] ‚Üí courses-tab
   - courseDetail{} ‚Üí courses-tab (detail view)
   - assignments[] ‚Üí assignments-tab
   - grades[] ‚Üí grades-tab
   - aiSummaries{} ‚Üí ai-assistant-tab
   - profile{} ‚Üí profile-settings

   Shared helper methods:
   - listMaterials(courseCode)
   - addMaterial(courseCode, object)
   - listAssignments(courseCode)
   - submitAssignment(assignmentId, fileObj)
   - generateSummaryFromMaterials(courseCode)
   =========================================================== */

    function app(){
      return {
        /* ===== Role & feature gates (Student-only today) ===== */
        userRole: localStorage.getItem('ignite_role') || 'student',      // 'student' | 'professor'
        get isStudent(){ return this.userRole === 'student'; },
        get isProfessor(){ return this.userRole === 'professor'; },
        setRole(role){                                                    // keep for later when you add a login/role switch
          this.userRole = role;
          localStorage.setItem('ignite_role', role);
          // If you eventually diverge routes per role, you could reset page here.
          // this.page = this.isStudent ? 'dashboard' : 'prof-dashboard';
        },
        features: {                                                       // flip to true as you add professor pages later
          professorLMS: false
        },
        getStoreKey(key){                                                 // keep student/professor data isolated
          return `ignite_${this.userRole}_${key}`;
        },

        /* ===== UI state (unchanged visual behavior) ===== */
        sidebarOpen: false,
        page: 'dashboard',

        /* ===== Profile (role-scoped storage) ===== */
        profile: JSON.parse(localStorage.getItem(`ignite_${(localStorage.getItem('ignite_role')||'student')}_profile`)
                  || '{"firstName":"Sarah","email":"sarahj@university.edu"}'),
        saveProfile(){
          localStorage.setItem(this.getStoreKey('profile'), JSON.stringify(this.profile));
        },

        /* ===== Dashboard content (student sample data) ===== */
        news: [
          {id:1, title:'New Computer Science Lab Opens on Campus', tag:'Campus', date:'Oct 20, 2025', img:'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=800&auto=format&fit=crop', snippet:'State-of-the-art facility features cutting-edge technology and collaborative workspaces for students.'},
          {id:2, title:'Spring 2026 Registration Now Open', tag:'Academic', date:'Oct 18, 2025', img:'https://images.unsplash.com/photo-1523580494863-6f3031224c94?q=80&w=800&auto=format&fit=crop', snippet:'Students can now register for spring semester courses. Priority registration ends November 1st.'},
          {id:3, title:'Career Fair Success: 500+ Students Connected with Employers', tag:'Career', date:'Oct 15, 2025', img:'https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?q=80&w=800&auto=format&fit=crop', snippet:'Annual fall career fair brings together top companies and talented students for networking opportunities.'}
        ],
        important: [
          {id:1,title:'Data Structures Quiz',when:'Nov 10 ‚Ä¢ 10:30 AM'},
          {id:2,title:'Linear Algebra Midterm',when:'Nov 15 ‚Ä¢ 1:00 PM'},
          {id:3,title:'Project Teams Due',when:'Nov 20 ‚Ä¢ 11:59 PM'}
        ],

        /* ===== Mini calendar (unchanged) ===== */
        cal: (()=>{const d=new Date();return {y:d.getFullYear(), m:d.getMonth()};})(),
        get daysMatrix(){
          const {y,m}=this.cal;
          const first=new Date(y,m,1);
          const startIdx=first.getDay();
          const daysInMonth=new Date(y,m+1,0).getDate();
          const prevDays=new Date(y,m,0).getDate();
          const cells=[];
          for(let i=startIdx-1;i>=0;i--){ cells.push({day:prevDays-i,inMonth:false,date:new Date(y,m-1,prevDays-i)}); }
          for(let d=1; d<=daysInMonth; d++){ cells.push({day:d,inMonth:true,date:new Date(y,m,d)}); }
          while(cells.length%7!==0){
            const d = cells.length - (startIdx + daysInMonth) + 1;
            cells.push({day:d,inMonth:false,date:new Date(y,m+1,d)});
          }
          return cells;
        },
        monthLabel(){ return new Date(this.cal.y,this.cal.m,1).toLocaleString('en',{month:'long',year:'numeric'}); },
        prevMonth(){ if(this.cal.m===0){this.cal.m=11;this.cal.y--;} else {this.cal.m--;} },
        nextMonth(){ if(this.cal.m===11){this.cal.m=0;this.cal.y++;} else {this.cal.m++;} },
        isToday(d){
          const t=new Date();
          return d.inMonth && d.date.getFullYear()===t.getFullYear() && d.date.getMonth()===t.getMonth() && d.date.getDate()===t.getDate();
        },

        /* ===== Courses (student view data) ===== */
        courseCards: [
          {
            id: 1,
            title: 'Advanced Web Development',
            instructor: 'Dr. Emily Chen',
            modules: 12,
            students: '45',
            next: 'Oct 21, 10:00 AM',
            image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1600&auto=format&fit=crop'
          },
          {
            id: 2,
            title: 'Data Structures & Algorithms',
            instructor: 'Prof. Michael Zhang',
            modules: 15,
            students: '60',
            next: 'Oct 22, 2:00 PM',
            image: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1600&auto=format&fit=crop'
          },
          {
            id: 3,
            title: 'Linear Algebra',
            instructor: 'Dr. Sarah Johnson',
            modules: 10,
            students: '38',
            next: 'Oct 23, 11:00 AM',
            image: 'https://images.unsplash.com/photo-1529101091764-c3526daf38fe?q=80&w=1600&auto=format&fit=crop'
          }
        ],

        /* Detailed per-course data that drives the Course Detail page */
        courseDetails: {
          1: {
            id: 1,
            code: 'CS 401',
            title: 'Advanced Web Development',
            instructorName: 'Dr. Emily Chen',
            schedule: 'Mon & Wed, 10:00 AM ‚Äì 11:30 AM',
            location: 'Room 301, CS Building',
            officeHours: 'Tue & Thu, 2:00 PM ‚Äì 4:00 PM',
            pinned: [1, 2, 3],
            announcements: [
              {
                id: 1,
                title: 'Welcome to Advanced Web Development!',
                body: 'Welcome everyone! Please review the syllabus and set up your dev environment before our first class.',
                priority: 'high',
                date: 'Sept 1, 2025',
                time: '9:00 AM'
              },
              {
                id: 2,
                title: 'Project Teams Formation Deadline',
                body: 'Reminder: Team formation is due by Sept 20th. Use the discussion board to find teammates (3‚Äì4 members).',
                priority: 'high',
                date: 'Sept 15, 2025',
                time: '2:30 PM'
              },
              {
                id: 3,
                title: 'Office Hours Update',
                body: 'Office hours moved to Wednesday 3‚Äì5 PM due to a faculty meeting.',
                priority: 'medium',
                date: 'Oct 1, 2025',
                time: '11:15 AM'
              }
            ],
            syllabus: {
              description: 'This course covers advanced topics in modern web development including React, state management, API integration, and deployment strategies. You will build full-stack applications using industry-standard tools.',
              objectives: [
                'Master React and modern JavaScript patterns.',
                'Implement RESTful APIs and integrate external services.',
                'Use state management (Context, Redux) in larger apps.',
                'Deploy and monitor production web applications.',
                'Apply security and accessibility best practices.'
              ],
              grading: [
                { label: 'Projects',       weight: 40 },
                { label: 'Assignments',    weight: 25 },
                { label: 'Midterm Exam',   weight: 15 },
                { label: 'Final Exam',     weight: 20 }
              ],
              instructor: {
                name: 'Dr. Emily Chen',
                email: 'emily.chen@university.edu',
                officeHours: 'Tue & Thu, 2:00 PM ‚Äì 4:00 PM'
              }
            },
            slides: [
              { title: 'Week 1: Introduction to Modern Web Development', pages: '45 pages', date: 'Uploaded Sept 5, 2025',  size: '2.4 MB', url: '/files/webdev-week1-intro.pdf' },
              { title: 'Week 2: React Fundamentals',                     pages: '52 pages', date: 'Uploaded Sept 12, 2025', size: '3.1 MB', url: '/files/webdev-week2-react-fundamentals.pdf' },
              { title: 'Week 3: Component Architecture & State',         pages: '48 pages', date: 'Uploaded Sept 19, 2025', size: '2.8 MB', url: '/files/webdev-week3-components-state.pdf' },
              { title: 'Week 4: Hooks and Advanced Patterns',            pages: '55 pages', date: 'Uploaded Sept 26, 2025', size: '3.5 MB', url: '/files/webdev-week4-hooks.pdf' },
              { title: 'Week 5: API Integration & Data Fetching',        pages: '50 pages', date: 'Uploaded Oct 3, 2025',   size: '3.0 MB', url: '/files/webdev-week5-api.pdf' },
              { title: 'Week 6: State Management with Redux',            pages: '60 pages', date: 'Uploaded Oct 10, 2025',  size: '3.8 MB', url: '/files/webdev-week6-redux.pdf' },
              { title: 'Week 7: Authentication & Security',              pages: '42 pages', date: 'Uploaded Oct 17, 2025',  size: '2.2 MB', url: '/files/webdev-week7-auth.pdf' }
            ],
            materials: [
              { title: 'Course Syllabus',          type: 'PDF',   meta: '245 KB',    size: '245 KB',  date: 'Added Sept 1, 2025',  download: true,  isExternal: false, url: '/files/webdev-syllabus.pdf' },
              { title: 'Project Guidelines',       type: 'PDF',   meta: '180 KB',    size: '180 KB',  date: 'Added Sept 5, 2025',  download: true,  isExternal: false, url: '/files/webdev-project-guidelines.pdf' },
              { title: 'React Official Docs',      type: 'LINK',  meta: 'External',  size: '',        date: 'Added Sept 5, 2025',  download: false, isExternal: true,  url: 'https://react.dev/' },
              { title: 'API Integration Demo',     type: 'VIDEO', meta: '45 min',    size: '45 min',  date: 'Added Oct 1, 2025',   download: false, isExternal: false, url: '/files/webdev-api-demo.mp4' },
              { title: 'Midterm Study Guide',      type: 'PDF',   meta: '320 KB',    size: '320 KB',  date: 'Added Oct 10, 2025',  download: true,  isExternal: false, url: '/files/webdev-midterm-guide.pdf' },
              { title: 'Code Examples Repository', type: 'LINK',  meta: 'GitHub',    size: '',        date: 'Added Sept 5, 2025',  download: false, isExternal: true,  url: 'https://github.com/' }
            ],
            datesUpcoming: [
              { title: 'Database Design Project',        kind: 'assignment',   date: 'Oct 22, 2025', time: '11:59 PM',            location: '',            points: '100' },
              { title: 'Team Meeting - Progress Check',  kind: 'meeting',      date: 'Oct 24, 2025', time: '3:00 PM',             location: 'Study Room B', points: ''    },
              { title: 'Assignment 3: API Integration',  kind: 'assignment',   date: 'Oct 29, 2025', time: '11:59 PM',            location: '',            points: '75'  },
              { title: 'Project Presentation',           kind: 'presentation', date: 'Nov 5, 2025',  time: '10:00 AM',            location: '',            points: '150' },
              { title: 'Final Exam',                     kind: 'exam',         date: 'Dec 10, 2025', time: '2:00 PM ‚Äì 4:00 PM',   location: '',            points: '150' }
            ],
            timeline: [
              { title: 'Assignment 1: React Components', status: 'Completed', kind: 'assignment', date: 'Sept 15, 2025', time: '11:59 PM', points: '50' },
              { title: 'Assignment 2: State Management', status: 'Completed', kind: 'assignment', date: 'Sept 22, 2025', time: '11:59 PM', points: '50' },
              { title: 'Project Proposal Due',           status: 'Completed', kind: 'assignment', date: 'Sept 29, 2025', time: '11:59 PM', points: '25' }
            ],
            tools: [
              { name: 'Visual Studio Code', tag: 'Development Environment', desc: 'Primary code editor for web development.',          url: 'https://code.visualstudio.com/',                                       icon: 'üíª' },
              { name: 'Node.js & npm',      tag: 'Runtime',                 desc: 'JavaScript runtime and package manager.',           url: 'https://nodejs.org/',                                                  icon: 'üü¢' },
              { name: 'Git & GitHub',       tag: 'Version Control',         desc: 'Version control and collaboration platform.',       url: 'https://github.com/',                                                  icon: 'üåø' },
              { name: 'React DevTools',     tag: 'Debugging',               desc: 'Browser extension for debugging React apps.',       url: 'https://chromewebstore.google.com/',                                   icon: '‚öõÔ∏è' },
              { name: 'Postman',            tag: 'API Testing',             desc: 'API development and testing tool.',                 url: 'https://www.postman.com/downloads/',                                   icon: 'üìÆ' },
              { name: 'MongoDB Compass',    tag: 'Database',                desc: 'GUI for MongoDB database management.',              url: 'https://www.mongodb.com/products/tools/compass',                       icon: 'üçÉ' },
              { name: 'Figma',              tag: 'Design',                  desc: 'Design and prototyping tool.',                      url: 'https://www.figma.com/',                                               icon: 'üé®' },
              { name: 'Chrome DevTools',    tag: 'Debugging',               desc: 'Built-in browser debugging tools.',                 url: 'https://developer.chrome.com/docs/devtools',                           icon: 'üß™' }
            ],
            textbooksRequired: [
              {
                icon: 'üìò',
                title: 'Eloquent JavaScript',
                subtitle: 'Marijn Haverbeke ‚Ä¢ 3rd Edition',
                tags: ['Required', 'Free Access', 'Digital'],
                description: 'A modern introduction to programming with JavaScript.',
                isbn: '978-1593279509',
                link: { label: 'Read Online (Free)', url: 'https://eloquentjavascript.net/' }
              },
              {
                icon: 'üìó',
                title: 'Learning React',
                subtitle: 'Alex Banks, Eve Porcello ‚Ä¢ 2nd Edition',
                tags: ['Required', 'Digital/Print'],
                description: 'Modern patterns for developing React applications.',
                isbn: '978-1492051718',
                link: { label: 'View on O‚ÄôReilly', url: 'https://www.oreilly.com/library/view/learning-react-2nd/9781492051718/' }
              },
              {
                icon: 'üìï',
                title: 'Fullstack React',
                subtitle: 'Anthony Accomazzo et al. ‚Ä¢ 2023 Edition',
                tags: ['Required', 'Digital/Print'],
                description: 'A complete guide to ReactJS and related tooling.',
                isbn: '978-0991344628',
                link: { label: 'Access Textbook', url: 'https://www.fullstackreact.com/' }
              }
            ],
            textbooksRecommended: [
              {
                icon: 'üìô',
                title: 'You Don‚Äôt Know JS Yet',
                subtitle: 'Kyle Simpson',
                tags: ['Optional', 'Free Online'],
                description: 'A deep dive into core JavaScript concepts.',
                isbn: '',
                link: { label: 'Read on GitHub', url: 'https://github.com/getify/You-Dont-Know-JS' }
              }
            ]
          },

          2: {
            id: 2,
            code: 'CS 350',
            title: 'Data Structures & Algorithms',
            instructorName: 'Prof. Michael Zhang',
            schedule: 'Tue & Thu, 2:00 PM ‚Äì 3:30 PM',
            location: 'Room 210, CS Building',
            officeHours: 'Wed, 1:00 PM ‚Äì 3:00 PM',
            pinned: [1, 2],
            announcements: [
              {
                id: 1,
                title: 'Welcome to Data Structures & Algorithms',
                body: 'Please read Chapter 1 and install a Java or C++ IDE before our first class.',
                priority: 'high',
                date: 'Sept 1, 2025',
                time: '10:00 AM'
              },
              {
                id: 2,
                title: 'First Coding Lab Posted',
                body: 'Lab 1 on arrays and linked lists has been posted. It is due Sept 18.',
                priority: 'high',
                date: 'Sept 8, 2025',
                time: '4:00 PM'
              }
            ],
            syllabus: {
              description: 'This course introduces fundamental and advanced data structures and algorithms with a focus on time and space complexity, implementation, and problem solving.',
              objectives: [
                'Analyze algorithm performance using Big-O notation.',
                'Implement core data structures: arrays, lists, stacks, queues, trees, heaps, and hash tables.',
                'Work with graphs and graph algorithms (BFS, DFS, shortest paths).',
                'Design and compare sorting and searching algorithms.',
                'Apply data structures and algorithms to real-world problems.'
              ],
              grading: [
                { label: 'Programming Assignments', weight: 30 },
                { label: 'Labs & Quizzes',          weight: 20 },
                { label: 'Midterm Exam',            weight: 20 },
                { label: 'Final Exam',              weight: 30 }
              ],
              instructor: {
                name: 'Prof. Michael Zhang',
                email: 'michael.zhang@university.edu',
                officeHours: 'Wed, 1:00 PM ‚Äì 3:00 PM'
              }
            },
            slides: [
              { title: 'Week 1: Algorithm Analysis',          pages: '40 pages', date: 'Uploaded Sept 3, 2025',  size: '2.1 MB', url: '/files/dsa-week1-analysis.pdf' },
              { title: 'Week 2: Arrays & Linked Lists',       pages: '48 pages', date: 'Uploaded Sept 10, 2025', size: '2.6 MB', url: '/files/dsa-week2-lists.pdf' },
              { title: 'Week 3: Stacks & Queues',             pages: '45 pages', date: 'Uploaded Sept 17, 2025', size: '2.4 MB', url: '/files/dsa-week3-stacks-queues.pdf' },
              { title: 'Week 4: Trees & Binary Search Trees', pages: '55 pages', date: 'Uploaded Sept 24, 2025', size: '3.0 MB', url: '/files/dsa-week4-trees.pdf' },
              { title: 'Week 5: Heaps & Priority Queues',     pages: '50 pages', date: 'Uploaded Oct 1, 2025',   size: '2.8 MB', url: '/files/dsa-week5-heaps.pdf' },
              { title: 'Week 6: Hash Tables',                 pages: '52 pages', date: 'Uploaded Oct 8, 2025',   size: '2.9 MB', url: '/files/dsa-week6-hashtables.pdf' },
              { title: 'Week 7: Graphs & Traversals',         pages: '60 pages', date: 'Uploaded Oct 15, 2025',  size: '3.4 MB', url: '/files/dsa-week7-graphs.pdf' }
            ],
            materials: [
              { title: 'Course Syllabus',        type: 'PDF',  meta: '210 KB',   size: '210 KB',  date: 'Added Sept 1, 2025',  download: true,  isExternal: false, url: '/files/dsa-syllabus.pdf' },
              { title: 'Lab Guidelines',         type: 'PDF',  meta: '190 KB',   size: '190 KB',  date: 'Added Sept 2, 2025',  download: true,  isExternal: false, url: '/files/dsa-lab-guidelines.pdf' },
              { title: 'Sample Exam Questions',  type: 'PDF',  meta: '300 KB',   size: '300 KB',  date: 'Added Oct 5, 2025',   download: true,  isExternal: false, url: '/files/dsa-sample-exam.pdf' },
              { title: 'LeetCode Practice Set',  type: 'LINK', meta: 'External', size: '',        date: 'Added Sept 10, 2025', download: false, isExternal: true,  url: 'https://leetcode.com/' },
              { title: 'Complexity Cheat Sheet', type: 'PDF',  meta: '120 KB',   size: '120 KB',  date: 'Added Sept 18, 2025', download: true,  isExternal: false, url: '/files/dsa-complexity-sheet.pdf' },
              { title: 'Office Hours Zoom Link', type: 'LINK', meta: 'Zoom',     size: '',        date: 'Added Sept 1, 2025',  download: false, isExternal: true,  url: 'https://zoom.us/' }
            ],
            datesUpcoming: [
              { title: 'Lab 2: Linked Lists',              kind: 'assignment', date: 'Oct 20, 2025', time: '11:59 PM',            location: '',   points: '40'  },
              { title: 'Quiz 3: Trees',                    kind: 'exam',       date: 'Oct 27, 2025', time: '2:00 PM',             location: '',   points: '20'  },
              { title: 'Project: Pathfinding Visualizer',  kind: 'assignment', date: 'Nov 10, 2025', time: '11:59 PM',            location: '',   points: '120' },
              { title: 'Final Exam',                       kind: 'exam',       date: 'Dec 15, 2025', time: '9:00 AM ‚Äì 12:00 PM',  location: '',   points: '200' }
            ],
            timeline: [
              { title: 'Lab 1: Arrays',              status: 'Completed', kind: 'assignment', date: 'Sept 12, 2025', time: '11:59 PM', points: '30' },
              { title: 'Quiz 1: Algorithm Analysis', status: 'Completed', kind: 'exam',       date: 'Sept 19, 2025', time: '2:00 PM',  points: '15' },
              { title: 'Quiz 2: Lists & Queues',     status: 'Completed', kind: 'exam',       date: 'Sept 26, 2025', time: '2:00 PM',  points: '15' }
            ],
            tools: [
              { name: 'Visual Studio Code', tag: 'IDE',            desc: 'Lightweight editor for C++/Java coding.',       url: 'https://code.visualstudio.com/', icon: 'üíª' },
              { name: 'Java JDK',          tag: 'Runtime',        desc: 'Java development kit for algorithm labs.',      url: 'https://www.oracle.com/java/',   icon: '‚òï' },
              { name: 'Git & GitHub',      tag: 'Version Control', desc: 'Submit and version your lab code.',            url: 'https://github.com/',            icon: 'üåø' },
              { name: 'LeetCode',          tag: 'Practice',       desc: 'Online platform to practice algorithm problems.', url: 'https://leetcode.com/',         icon: 'üß©' },
              { name: 'Replit',            tag: 'Online IDE',     desc: 'In-browser coding environment.',                url: 'https://replit.com/',            icon: 'üåê' },
              { name: 'Jupyter Notebook',  tag: 'Exploration',    desc: 'Experiment with Python implementations.',       url: 'https://jupyter.org/',           icon: 'üìì' }
            ],
            textbooksRequired: [
              {
                icon: 'üìò',
                title: 'Introduction to Algorithms',
                subtitle: 'Cormen, Leiserson, Rivest & Stein ‚Ä¢ 3rd Edition',
                tags: ['Required', 'Reference'],
                description: 'The standard reference for fundamental algorithms and data structures.',
                isbn: '978-0262033848',
                link: { label: 'View on Publisher', url: 'https://mitpress.mit.edu/9780262033848/' }
              },
              {
                icon: 'üìó',
                title: 'Data Structures & Algorithm Analysis in C++',
                subtitle: 'Mark A. Weiss ‚Ä¢ 4th Edition',
                tags: ['Required', 'Digital/Print'],
                description: 'Practical implementation-focused coverage of data structures.',
                isbn: '978-0132847377',
                link: { label: 'View Details', url: 'https://www.pearson.com/' }
              }
            ],
            textbooksRecommended: [
              {
                icon: 'üìô',
                title: 'Algorithms',
                subtitle: 'Dasgupta, Papadimitriou, Vazirani',
                tags: ['Optional'],
                description: 'Concise and intuitive explanations of core algorithms.',
                isbn: '978-0073523408',
                link: { label: 'More Info', url: 'https://www.mheducation.com/' }
              }
            ]
          },

          3: {
            id: 3,
            code: 'MATH 201',
            title: 'Linear Algebra',
            instructorName: 'Dr. Sarah Johnson',
            schedule: 'Mon, Wed & Fri, 11:00 AM ‚Äì 12:00 PM',
            location: 'Room 120, Math Building',
            officeHours: 'Mon, 2:00 PM ‚Äì 4:00 PM',
            pinned: [1],
            announcements: [
              {
                id: 1,
                title: 'Welcome to Linear Algebra',
                body: 'Please bring a scientific calculator and print the first page of the formula sheet for Week 1.',
                priority: 'high',
                date: 'Sept 1, 2025',
                time: '8:30 AM'
              },
              {
                id: 2,
                title: 'Problem Session Added',
                body: 'Optional problem-solving session every Thursday 4‚Äì5 PM in Room 118.',
                priority: 'medium',
                date: 'Sept 10, 2025',
                time: '3:00 PM'
              }
            ],
            syllabus: {
              description: 'An introduction to linear algebra with emphasis on matrices, vector spaces, linear transformations, and eigenvalues/eigenvectors.',
              objectives: [
                'Solve systems of linear equations using matrix methods.',
                'Understand vector spaces, subspaces, bases, and dimension.',
                'Work with linear transformations and matrix representations.',
                'Compute eigenvalues and eigenvectors and diagonalize matrices.',
                'Apply linear algebra concepts to geometry and data science.'
              ],
              grading: [
                { label: 'Homework',      weight: 30 },
                { label: 'Quizzes',       weight: 10 },
                { label: 'Midterm Exam',  weight: 25 },
                { label: 'Final Exam',    weight: 35 }
              ],
              instructor: {
                name: 'Dr. Sarah Johnson',
                email: 'sarah.johnson@university.edu',
                officeHours: 'Mon, 2:00 PM ‚Äì 4:00 PM'
              }
            },
            slides: [
              { title: 'Week 1: Systems of Linear Equations', pages: '38 pages', date: 'Uploaded Sept 2, 2025',  size: '1.9 MB', url: '/files/la-week1-systems.pdf' },
              { title: 'Week 2: Matrix Algebra',              pages: '42 pages', date: 'Uploaded Sept 9, 2025',  size: '2.1 MB', url: '/files/la-week2-matrices.pdf' },
              { title: 'Week 3: Determinants',                pages: '35 pages', date: 'Uploaded Sept 16, 2025', size: '1.7 MB', url: '/files/la-week3-determinants.pdf' },
              { title: 'Week 4: Vector Spaces',               pages: '47 pages', date: 'Uploaded Sept 23, 2025', size: '2.5 MB', url: '/files/la-week4-vector-spaces.pdf' },
              { title: 'Week 5: Eigenvalues & Eigenvectors',  pages: '50 pages', date: 'Uploaded Sept 30, 2025', size: '2.6 MB', url: '/files/la-week5-eigenvalues.pdf' }
            ],
            materials: [
              { title: 'Course Syllabus',                     type: 'PDF',  meta: '200 KB',     size: '200 KB', date: 'Added Sept 1, 2025',  download: true,  isExternal: false, url: '/files/la-syllabus.pdf' },
              { title: 'Formula Sheet (Midterm)',             type: 'PDF',  meta: '150 KB',     size: '150 KB', date: 'Added Sept 15, 2025', download: true,  isExternal: false, url: '/files/la-formula-midterm.pdf' },
              { title: 'Recommended Problem Sets',            type: 'PDF',  meta: '10 pages',   size: '250 KB', date: 'Added Sept 20, 2025', download: true,  isExternal: false, url: '/files/la-extra-problems.pdf' },
              { title: '3Blue1Brown Essence of Linear Algebra', type: 'LINK', meta: 'YouTube Playlist', size: '', date: 'Added Sept 5, 2025', download: false, isExternal: true,  url: 'https://www.youtube.com/playlist?list=PLZHQObOWTQDMsr9K-rj53DwVRMYO3t5Yr' },
              { title: 'MATLAB Cheat Sheet',                  type: 'PDF',  meta: '2 pages',    size: '90 KB',  date: 'Added Sept 25, 2025', download: true,  isExternal: false, url: '/files/la-matlab-cheatsheet.pdf' }
            ],
            datesUpcoming: [
              { title: 'Quiz 2: Matrix Algebra',           kind: 'exam',       date: 'Oct 18, 2025', time: '11:00 AM',             location: 'In class',        points: '20'  },
              { title: 'Homework 4 Due',                  kind: 'assignment', date: 'Oct 22, 2025', time: '11:59 PM',             location: 'LMS submission',  points: '30'  },
              { title: 'Midterm Exam',                    kind: 'exam',       date: 'Nov 3, 2025',  time: '11:00 AM ‚Äì 12:00 PM', location: 'Room 120',        points: '100' },
              { title: 'Final Exam',                      kind: 'exam',       date: 'Dec 17, 2025', time: '1:00 PM ‚Äì 4:00 PM',   location: 'Exam Hall A',     points: '150' }
            ],
            timeline: [
              { title: 'Homework 1: Systems of Equations', status: 'Completed', kind: 'assignment', date: 'Sept 10, 2025', time: '11:59 PM', points: '25' },
              { title: 'Quiz 1: Row Reduction',           status: 'Completed', kind: 'exam',       date: 'Sept 17, 2025', time: '11:00 AM', points: '20' },
              { title: 'Homework 2: Matrix Algebra',      status: 'Completed', kind: 'assignment', date: 'Sept 24, 2025', time: '11:59 PM', points: '25' }
            ],
            tools: [
              { name: 'MATLAB or Octave',         tag: 'Computation',   desc: 'Matrix computations and visualization.',      url: 'https://www.mathworks.com/products/matlab.html', icon: 'üìä' },
              { name: 'Python (NumPy)',           tag: 'Computation',   desc: 'Python library for numerical linear algebra.', url: 'https://numpy.org/',                          icon: 'üêç' },
              { name: 'Desmos Matrix Calculator', tag: 'Visualization', desc: 'Quick matrix operations in the browser.',     url: 'https://www.desmos.com/matrix',                icon: 'üìà' },
              { name: 'Overleaf',                 tag: 'LaTeX',         desc: 'Typeset your linear algebra solutions.',       url: 'https://www.overleaf.com/',                     icon: 'üìÑ' }
            ],
            textbooksRequired: [
              {
                icon: 'üìò',
                title: 'Linear Algebra and Its Applications',
                subtitle: 'David C. Lay et al. ‚Ä¢ 5th Edition',
                tags: ['Required', 'Digital/Print'],
                description: 'Standard undergraduate text for linear algebra.',
                isbn: '978-0321982384',
                link: { label: 'View on Publisher', url: 'https://www.pearson.com/' }
              },
              {
                icon: 'üìó',
                title: 'Introduction to Linear Algebra',
                subtitle: 'Gilbert Strang ‚Ä¢ 5th Edition',
                tags: ['Required'],
                description: 'Concept-driven approach with many examples.',
                isbn: '978-0980232776',
                link: { label: 'MIT Resources', url: 'https://math.mit.edu/~gs/linearalgebra/' }
              }
            ],
            textbooksRecommended: [
              {
                icon: 'üìô',
                title: 'No Bullshit Guide to Linear Algebra',
                subtitle: 'Ivan Savov',
                tags: ['Optional'],
                description: 'Intuitive explanations and lots of worked examples.',
                isbn: '978-0992001001',
                link: { label: 'More Info', url: 'https://minireference.com/linear_algebra_book/' }
              }
            ]
          }
        },

        // active tab and current course for the detail page
        courseDetailTab: 'syllabus',
        courseDetail: {},

        // Resource modal state (fake PDF viewer)
        resourceModalOpen: false,
        resourceModal: {
          title: '',
          type: '',
          pages: '',
          date: '',
          size: '',
          url: ''
        },

        openResource(payload) {
          this.resourceModal = payload;
          this.resourceModalOpen = true;
        },
        closeResource() {
          this.resourceModalOpen = false;
        },
        openCourse(id) {
          if (this.courseDetails[id]) {
            this.courseDetail = this.courseDetails[id];
          } else {
            const firstKey = Object.keys(this.courseDetails)[0];
            this.courseDetail = this.courseDetails[firstKey];
          }
          this.courseDetailTab = 'syllabus';
          this.page = 'course';
        },

        /* ===== AI Assistant (student) ===== */
        /* ===== AI Assistant (student) ===== */
        aiTab: 'chat',

        // Loading flags for real API calls
        isChatLoading: false,
        isSummaryLoading: false,
        isQuizLoading: false,
        isPlanLoading: false,

        faq: [
          'How do I submit assignments?',
          'When are grades posted?',
          'How can I contact my instructor?',
          'What‚Äôs the late submission policy?',
          'How do I access lecture recordings?'
        ],
        chat: {
          input: '',
          messages: [
            {
              id: 1,
              role: 'assistant',
              text: "Hello! I'm your AI Teaching Assistant. I'm here to help you with questions, summarize lectures, generate quizzes, and create personalized study plans. How can I assist you today?"
            }
          ]
        },
        async sendChat() {
          const text = this.chat.input.trim();
          if (!text || this.isChatLoading) return;

          // push user message immediately
          const userMsgId = Date.now();
          this.chat.messages.push({ id: userMsgId, role: 'user', text });
          this.chat.input = '';
          this.isChatLoading = true;

          this.$nextTick(() => {
            const el = document.getElementById('chatScroll');
            el && (el.scrollTop = el.scrollHeight);
          });

          try {
            const res = await fetch('/api/ai/chat', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                messages: this.chat.messages.map(m => ({ role: m.role, content: m.text }))
              })
            });

            if (!res.ok) throw new Error('Network error');

            const data = await res.json();
            const replyText = data.reply || 'I received your message, but the server did not return a reply field.';

            this.chat.messages.push({
              id: Date.now() + 1,
              role: 'assistant',
              text: replyText
            });
          } catch (err) {
            console.error(err);
            this.chat.messages.push({
              id: Date.now() + 2,
              role: 'assistant',
              text: 'Sorry, something went wrong while contacting the AI service. Please try again in a moment.'
            });
          } finally {
            this.isChatLoading = false;
            this.$nextTick(() => {
              const el = document.getElementById('chatScroll');
              el && (el.scrollTop = el.scrollHeight);
            });
          }
        },


        /* ===== Course + Lectures used by Summary/Quiz (student) ===== */
        /* Only show currently enrolled courses (CS 401, CS 350, MATH 201) */
        courses: [
          {
            code: 'CS 401',
            lectures: [
              { id: 'cs401-1', title: 'Week 1 ‚Äì Modern Web Fundamentals' },
              { id: 'cs401-2', title: 'Week 2 ‚Äì React Components & JSX' },
              { id: 'cs401-3', title: 'Week 3 ‚Äì State & Props' },
              { id: 'cs401-4', title: 'Week 4 ‚Äì Hooks & Side Effects' },
              { id: 'cs401-5', title: 'Week 5 ‚Äì API Integration & Fetching Data' },
              { id: 'cs401-6', title: 'Week 6 ‚Äì State Management Patterns' }
            ]
          },
          {
            code: 'CS 350',
            lectures: [
              { id: 'cs350-1', title: 'Week 1 ‚Äì Algorithm Analysis & Big-O' },
              { id: 'cs350-2', title: 'Week 2 ‚Äì Arrays & Linked Lists' },
              { id: 'cs350-3', title: 'Week 3 ‚Äì Stacks & Queues' },
              { id: 'cs350-4', title: 'Week 4 ‚Äì Trees & BSTs' },
              { id: 'cs350-5', title: 'Week 5 ‚Äì Heaps & Priority Queues' },
              { id: 'cs350-6', title: 'Week 6 ‚Äì Hash Tables' }
            ]
          },
          {
            code: 'MATH 201',
            lectures: [
              { id: 'math201-1', title: 'Week 1 ‚Äì Systems of Linear Equations' },
              { id: 'math201-2', title: 'Week 2 ‚Äì Matrix Algebra' },
              { id: 'math201-3', title: 'Week 3 ‚Äì Vector Spaces & Subspaces' },
              { id: 'math201-4', title: 'Week 4 ‚Äì Basis & Dimension' },
              { id: 'math201-5', title: 'Week 5 ‚Äì Eigenvalues & Eigenvectors' }
            ]
          }
        ],
        selectedCourse: 'CS 401',
        selectedLectures: [],
        currentLectures() {
          const c = this.courses.find(x => x.code === this.selectedCourse);
          return c ? c.lectures : [];
        },
        toggleLecture(id) {
          const i = this.selectedLectures.indexOf(id);
          if (i >= 0) this.selectedLectures.splice(i, 1);
          else this.selectedLectures.push(id);
        },
        summary: { html: '' },

        async generateSummary() {
          if (!this.selectedLectures.length || this.isSummaryLoading) return;
          const courseCode = this.selectedCourse;
          const lectures = this.currentLectures()
            .filter(l => this.selectedLectures.includes(l.id))
            .map(l => ({ id: l.id, title: l.title }));

          this.isSummaryLoading = true;
          this.summary.html = '';

          try {
            const res = await fetch('/api/ai/summary', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                courseCode,
                lectures
              })
            });

            if (!res.ok) throw new Error('Network error');

            const data = await res.json();
            // Expecting: { summaryHtml: "<p>...</p>" } OR { summary: "plain text" }
            if (data.summaryHtml) {
              this.summary.html = data.summaryHtml;
            } else if (data.summary) {
              this.summary.html = `<p>${data.summary}</p>`;
            } else {
              // fallback if backend returns something unexpected
              this.summary.html = `
                <h4>Summary for ${courseCode}</h4>
                <ul>${lectures
                  .map(
                    l =>
                      `<li><strong>${l.title}:</strong> key concepts, worked examples, and common pitfalls.</li>`
                  )
                  .join('')}</ul>
                <p><em>Note:</em> Backend did not provide structured summary, so a generic summary is shown.</p>
              `;
            }
          } catch (err) {
            console.error(err);
            this.summary.html =
              '<p class="text-red-600">Sorry, something went wrong while generating the summary. Please try again.</p>';
          } finally {
            this.isSummaryLoading = false;
          }
        },


        /* ===== Quiz ===== */
        quiz: { course: 'CS 401', lectures: [] },
        lecturesByCode(code) {
          const c = this.courses.find(x => x.code === code);
          return c ? c.lectures : [];
        },
        toggleQuizLecture(id) {
          const i = this.quiz.lectures.indexOf(id);
          if (i >= 0) this.quiz.lectures.splice(i, 1);
          else this.quiz.lectures.push(id);
        },
        quizOut: [],
        async generateQuiz() {
          if (!this.quiz.lectures.length || this.isQuizLoading) return;

          const courseCode = this.quiz.course;
          const lectures = this.lecturesByCode(courseCode)
            .filter(l => this.quiz.lectures.includes(l.id))
            .map(l => ({ id: l.id, title: l.title }));

          this.isQuizLoading = true;
          this.quizOut = [];

          try {
            const res = await fetch('/api/ai/quiz', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                courseCode,
                lectures
              })
            });

            if (!res.ok) throw new Error('Network error');

            const data = await res.json();
            // Expecting: { questions: [{ question, options, answer }] }
            if (Array.isArray(data.questions) && data.questions.length) {
              this.quizOut = data.questions.map(q => ({
                q: q.question || 'Untitled question',
                options: q.options && q.options.length ? q.options : ['Option A', 'Option B', 'Option C', 'Option D'],
                answer: q.answer || 'Answer not provided'
              }));
            } else {
              // fallback to a generic quiz if backend gives nothing
              this.quizOut = lectures.map((l, idx) => ({
                q: `What is a key idea from "${l.title}"?`,
                options: ['Definitions', 'Core theorem', 'Application example', 'All of the above'],
                answer: 'All of the above'
              }));
            }
          } catch (err) {
            console.error(err);
            this.quizOut = [
              {
                q: 'We could not reach the AI quiz service.',
                options: ['Retry later', 'Check network', 'Contact support', 'All of the above'],
                answer: 'All of the above'
              }
            ];
          } finally {
            this.isQuizLoading = false;
          }
        },


        /* ===== Study Plan ===== */
        plan: { goals: '', pace: '' },
        planOut: [],
        async generatePlan() {
          if (this.isPlanLoading) return;

          const goals = this.plan.goals || 'Improve overall performance across my current courses.';
          const pace = this.plan.pace || '10‚Äì12 hours per week';

          this.isPlanLoading = true;
          this.planOut = [];

          try {
            const res = await fetch('/api/ai/plan', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                goals,
                pace,
                enrolledCourses: this.courses.map(c => c.code)
              })
            });

            if (!res.ok) throw new Error('Network error');

            const data = await res.json();
            // Expecting: { sections: [{ title, steps: [] }] }
            if (Array.isArray(data.sections) && data.sections.length) {
              this.planOut = data.sections.map(s => ({
                title: s.title || 'Study Block',
                steps: Array.isArray(s.steps) && s.steps.length ? s.steps : ['Review notes', 'Do practice problems']
              }));
            } else {
              // fallback generic plan
              this.planOut = [
                {
                  title: 'Weekly Structure',
                  steps: [
                    'Mon/Wed/Fri: 60‚Äì90 min focused problem-solving',
                    'Tue/Thu: Review notes + summarize key ideas',
                    'Weekend: 2‚Äì3 hrs project work or past exams'
                  ]
                },
                {
                  title: 'Focus Areas',
                  steps: [
                    `Goals: ${goals}`,
                    'Prioritize weak topics from latest quizzes/assignments',
                    'Schedule checkpoints every Sunday evening'
                  ]
                },
                {
                  title: 'Time Allocation',
                  steps: [
                    `Planned study time: ${pace}`,
                    'Split time across CS 401, CS 350, and MATH 201 based on upcoming deadlines'
                  ]
                }
              ];
            }
          } catch (err) {
            console.error(err);
            this.planOut = [
              {
                title: 'Plan unavailable',
                steps: [
                  'We could not reach the AI planning service.',
                  'Please try again later or adjust your internet connection.'
                ]
              }
            ];
          } finally {
            this.isPlanLoading = false;
          }
        }


        /* ===============================
          Professor LMS (future)
          - When ready, create professor-only pages/components.
          - Gate them with:  x-show="isProfessor && features.professorLMS"
          - Store data with this.getStoreKey('something')
          - Keep student UI untouched.
          =============================== */
      }
    }
    function profilePage() {
      return {
        isEditing: false,
        profile: {
          firstName: 'Sarah',
          lastName: 'Johnson',
          email: 'sarah.j@university.edu',
          phone: '(555) 123-4567',
          about: 'Computer Science student passionate about web development and AI. Love building innovative solutions and learning new technologies.',
          gpa: '3.85',
          studentId: 'STU-2024-001234',
          enrolledTerm: 'Fall 2022',
          major: 'Computer Science',
          minor: 'Mathematics',
          year: 'Junior',
          expectedGrad: 'Spring 2025',
          street: '123 University Ave, Apt 4B',
          city: 'Boston',
          state: 'MA',
          zip: '02115',
          country: 'United States'
        },
        draft: {},

        get fullName() { return `${this.profile.firstName} ${this.profile.lastName}`.trim(); },

        init() {
          const saved = localStorage.getItem('ignite_profile_v1');
          if (saved) {
            try { this.profile = JSON.parse(saved); } catch(e) {}
          }
          this.draft = structuredClone(this.profile);
        },

        persist() {
          localStorage.setItem('ignite_profile_v1', JSON.stringify(this.profile));
        },

        startEdit() {
          this.draft = structuredClone(this.profile);
          this.isEditing = true;
        },

        save() {
          if (!this.draft.firstName || !this.draft.lastName) {
            alert('Please enter your first and last name.');
            return;
          }
          // lock email & studentId
          this.draft.email = this.profile.email;
          this.draft.studentId = this.profile.studentId;

          this.profile = structuredClone(this.draft);
          this.persist();
          this.isEditing = false;
        },

        cancel() {
          this.draft = structuredClone(this.profile);
          this.isEditing = false;
        },

        initials(fn, ln) {
          const a = (fn || '').trim()[0] || '';
          const b = (ln || '').trim()[0] || '';
          return (a + b || 'SJ').toUpperCase();
        }
      }
    }

  </script>
</body>
</html>

