<!doctype html>
<html lang="en" x-data="app()" :class="{'overflow-hidden': sidebarOpen, 'h-full': !isLoggedIn}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ignite LMS - Login</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            rust: {
              50:'#fdf4f2',100:'#fde8e4',200:'#f8d3cc',300:'#efb7ad',400:'#e19080',
              500:'#cf6f5b',600:'#b35146',700:'#8f3c35',800:'#73332f',900:'#5f2d2b'
            },
            sand: {
              50:'#faf7f3',100:'#f4efe9',200:'#ebe2d8',300:'#dfd1c1',400:'#cbb7a1',
              500:'#b7a089',600:'#9a836c',700:'#7c6957',800:'#645448',900:'#52463c'
            }
          },
          boxShadow: {
            card: '0 1px 2px rgba(15,23,42,.05), 0 12px 24px -8px rgba(15,23,42,.10)'
          },
          borderRadius: {
            xl2: '1.25rem'
          }
        }
      }
    }

    window.app = function() {
      return {
        // --- AUTH STATE & FUNCTIONS ---
        isLoggedIn: false, // Controls display: false for Login, true for Dashboard
        showLogin: true, // Controls display: true for Login tab, false for Sign-up tab
        registeredUser: {
          username: '',
          password: ''
        },
        loginCredentials: {
          username: '',
          password: ''
        },
        authError: '',
        showSignupPassword: false,
        showLoginPassword: false,

        validateSignup() {
          this.authError = '';
          if (this.registeredUser.username.length < 3) {
            this.authError = 'Username must have at least 3 characters.';
            return false;
          }
          if (this.registeredUser.password.length < 6) {
            this.authError = 'Password must have at least 6 characters.';
            return false;
          }
          return true;
        },

        handleSignup() {
          if (!this.validateSignup()) return;

          // For this example, we just switch to the login view and confirm registration
          this.showLogin = true;
          this.authError = 'Registration successful! Please log in now.';
          this.loginCredentials.username = this.registeredUser.username;
          this.loginCredentials.password = '';
        },

        handleLogin() {
          this.authError = '';
          if (this.loginCredentials.username === this.registeredUser.username &&
            this.loginCredentials.password === this.registeredUser.password &&
            this.registeredUser.username.length > 0) {
            // Successful Login
            this.isLoggedIn = true;
            this.page = 'dashboard';
            document.title = 'Ignite LMS - Dashboard';
            // Optional: Clear credentials after successful login
            this.loginCredentials.username = '';
            this.loginCredentials.password = '';
            this.authError = '';
          } else {
            // Failed Login
            this.authError = 'Invalid username or password. Please try again.';
          }
        },

        forgotPassword() {
          alert("A password reset link has been sent to your registered email (if one exists).");
        },
        // --- END AUTH STATE & FUNCTIONS ---


        // --- DASHBOARD/LMS STATE (Original Code) ---
        sidebarOpen: false,
        page: 'dashboard',
        aiTab: 'chat',
        selectedCourse: 'CS 301',
        selectedLectures: [],
        profile: {
          firstName: 'Alex',
          email: 'alex.student@university.edu'
        },
        courseDetail: {
          id: 1,
          title: 'Advanced Web Development',
          code: 'CS 301',
          instructorName: 'Dr. Jane Smith',
          schedule: 'Tu/Th, 1:00 PM - 2:30 PM',
          location: 'Building 2, Room 305',
          officeHours: 'Wed, 10:00 AM - 11:00 AM (Zoom)',
          pinned: [{
            id: 101
          }],
          announcements: [{
            id: 101,
            title: 'Project Proposal Due Next Week',
            body: 'Remember to submit your final project proposal to the assignment drop box by October 25th.',
            date: 'Oct 18, 2025',
            time: '1:00 PM',
            priority: 'high'
          }, ],
        },
        courses: [{
          code: 'CS 301',
          lectures: [{
            id: 1,
            title: 'Week 1: Introduction to Frameworks'
          }, {
            id: 2,
            title: 'Week 2: Advanced CSS & Tailwind'
          }, ]
        }, {
          code: 'MATH 202',
          lectures: [{
            id: 3,
            title: 'Chapter 1: Linear Transformations'
          }, {
            id: 4,
            title: 'Chapter 2: Eigenvalues'
          }]
        }, {
          code: 'PHYS 101',
          lectures: [{
            id: 5,
            title: 'Lecture 1: Kinematics'
          }, {
            id: 6,
            title: 'Lecture 2: Newton’s Laws'
          }]
        }],
        courseCards: [{
          id: 1,
          title: 'Advanced Web Development',
          instructor: 'Dr. Jane Smith',
          modules: 8,
          students: '60 students',
          next: 'Oct 29, 1:00 PM',
          image: 'https://images.unsplash.com/photo-1549692520-222a7f053e1c?q=80&w=800&auto=format&fit=crop',
          code: 'CS 301'
        }, {
          id: 2,
          title: 'Data Structures & Algorithms',
          instructor: 'Prof. Mark Chen',
          modules: 12,
          students: '150 students',
          next: 'Oct 30, 10:00 AM',
          image: 'https://images.unsplash.com/photo-1596558444490-67c699ed8a83?q=80&w=800&auto=format&fit=crop',
          code: 'DSA 405'
        }, {
          id: 3,
          title: 'Linear Algebra',
          instructor: 'Dr. Evelyn Reed',
          modules: 10,
          students: '95 students',
          next: 'Oct 28, 9:00 AM',
          image: 'https://images.unsplash.com/photo-1606761245041-5ac6788f5f40?q=80&w=800&auto=format&fit=crop',
          code: 'MATH 202'
        }, {
          id: 4,
          title: 'Intro to Quantum Physics',
          instructor: 'Prof. David Lee',
          modules: 15,
          students: '50 students',
          next: 'Oct 29, 3:00 PM',
          image: 'https://images.unsplash.com/photo-1581093557176-02e08677e4e6?q=80&w=800&auto=format&fit=crop',
          code: 'PHYS 101'
        }, {
          id: 5,
          title: 'Creative Writing Workshop',
          instructor: 'Ms. Chloe Adams',
          modules: 7,
          students: '30 students',
          next: 'Nov 1, 2:00 PM',
          image: 'https://images.unsplash.com/photo-1521986329281-0493b8d697e8?q=80&w=800&auto=format&fit=crop',
          code: 'ENG 105'
        }, ],
        openCourse(id) {
          const course = this.courseCards.find(c => c.id === id);
          if (course) {
            this.courseDetail.title = course.title;
            this.courseDetail.code = course.code;
            this.page = 'course';
          }
        },
        currentLectures() {
          const course = this.courses.find(c => c.code === this.selectedCourse);
          return course ? course.lectures : [];
        },
        toggleLecture(id) {
          const index = this.selectedLectures.indexOf(id);
          if (index === -1) {
            this.selectedLectures.push(id);
          } else {
            this.selectedLectures.splice(index, 1);
          }
        },
        generateSummary() {
          alert(`Generating summary for ${this.selectedLectures.length} lecture(s) from ${this.selectedCourse}...`);
        },
        chat: {
          input: '',
          messages: [{
            id: 1,
            role: 'ai',
            text: 'Hello! I am your AI Teaching Assistant. How can I help you with your studies today?'
          }],
        },
        sendChat() {
          if (this.chat.input.trim() === '') return;
          const userMessage = this.chat.input;
          this.chat.messages.push({
            id: Date.now(),
            role: 'user',
            text: userMessage
          });
          this.chat.input = '';
          // Simple AI response for demonstration
          setTimeout(() => {
            this.chat.messages.push({
              id: Date.now() + 1,
              role: 'ai',
              text: `Acknowledged: "${userMessage}". I need a moment to process your query.`
            });
            this.$nextTick(() => {
              document.getElementById('chatScroll').scrollTop = document.getElementById('chatScroll').scrollHeight;
            });
          }, 1000);
        },
        faq: [
          'What is the deadline for CS 301 project?',
          'Where is the library located?',
          'Summarize the key points of the last MATH 202 lecture.',
          'When are Prof. Smith\'s office hours?',
        ],
        // --- END DASHBOARD/LMS STATE ---
      }
    }
  </script>

          <!-- ================= LOGIN PAGE ================= -->
  <style>[x-cloak]{display:none!important}</style>
</head>
<body class="bg-sand-50 text-slate-800 selection:bg-rust-200/60" :class="{'h-full': !isLoggedIn, 'flex items-center justify-center': !isLoggedIn}">

  <template x-if="!isLoggedIn">
    <div class="max-w-md w-full mx-auto p-8 bg-white rounded-xl2 shadow-card border border-sand-200/70" x-data="{ tabs: ['Login', 'Sign-up'] }">
      <div class="text-center mb-6">
        <div class="inline-flex items-center gap-2">
          <div class="h-10 w-10 rounded-full bg-rust-500/90 flex items-center justify-center shadow-card">
            <span class="text-white font-semibold">I</span>
          </div>
          <h1 class="text-3xl font-bold text-slate-900">Ignite</h1>
        </div>
        <p class="text-sm text-slate-500 mt-2">Welcome to your learning platform.</p>
      </div>

      <div class="flex border-b border-sand-200 mb-6">
        <button
          @click="showLogin = true; authError = ''"
          :class="showLogin ? 'border-rust-500 text-rust-600 font-semibold' : 'border-transparent text-slate-500 hover:text-slate-700'"
          class="flex-1 py-2 text-center border-b-2 transition duration-150">
          Login
        </button>
        <button
          @click="showLogin = false; authError = ''"
          :class="!showLogin ? 'border-rust-500 text-rust-600 font-semibold' : 'border-transparent text-slate-500 hover:text-slate-700'"
          class="flex-1 py-2 text-center border-b-2 transition duration-150">
          Sign-up
        </button>
      </div>

      <div x-show="authError" :class="authError.includes('successful') ? 'bg-emerald-100 border-emerald-300 text-emerald-700' : 'bg-red-100 border-red-300 text-red-700'" class="p-3 mb-4 rounded-lg border text-sm" x-text="authError" x-cloak></div>

      <form x-show="showLogin" @submit.prevent="handleLogin" class="space-y-4" x-cloak>
        <div>
          <label for="login-username" class="block text-sm font-medium text-slate-700 mb-1">Username</label>
          <input type="text" id="login-username" x-model="loginCredentials.username" required class="w-full px-4 py-2 border border-sand-300 rounded-lg focus:ring-rust-500 focus:border-rust-500" placeholder="Enter your username">
        </div>

        <div class="relative">
          <label for="login-password" class="block text-sm font-medium text-slate-700 mb-1">Password</label>
          <input :type="showLoginPassword ? 'text' : 'password'" id="login-password" x-model="loginCredentials.password" required class="w-full px-4 py-2 border border-sand-300 rounded-lg focus:ring-rust-500 focus:border-rust-500" placeholder="••••••••">
          <button type="button" @click="showLoginPassword = !showLoginPassword" class="absolute inset-y-0 right-0 top-6 pr-3 flex items-center text-sm leading-5 text-slate-500">
            <svg x-show="!showLoginPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
            <svg x-show="showLoginPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.41 0 2.766.36 3.96 1.05M12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7a10.05 10.05 0 01-1.875-.175M13.875 18.825L6.125 11.075M12 15a3 3 0 100-6 3 3 0 000 6z"/></svg>
          </button>
        </div>

        <div class="flex items-center justify-between">
          <a href="#" @click.prevent="forgotPassword" class="text-sm text-rust-600 hover:text-rust-800">Forgot your password?</a>
        </div>

        <button type="submit" class="w-full py-2 px-4 rounded-lg bg-rust-500/90 text-white font-semibold hover:bg-rust-600 transition">Log In</button>
      </form>

      <form x-show="!showLogin" @submit.prevent="handleSignup" class="space-y-4" x-cloak>
        <div>
          <label for="signup-username" class="block text-sm font-medium text-slate-700 mb-1">Create Username</label>
          <input type="text" id="signup-username" x-model="registeredUser.username" :minlength="3" required class="w-full px-4 py-2 border border-sand-300 rounded-lg focus:ring-rust-500 focus:border-rust-500" placeholder="Minimum 3 characters">
          <p class="text-xs text-slate-500 mt-1">Username must have at least 3 characters.</p>
        </div>

        <div class="relative">
          <label for="signup-password" class="block text-sm font-medium text-slate-700 mb-1">Create Password</label>
          <input :type="showSignupPassword ? 'text' : 'password'" id="signup-password" x-model="registeredUser.password" :minlength="6" required class="w-full px-4 py-2 border border-sand-300 rounded-lg focus:ring-rust-500 focus:border-rust-500" placeholder="••••••••">
          <button type="button" @click="showSignupPassword = !showSignupPassword" class="absolute inset-y-0 right-0 **top-8** pr-3 flex items-center text-sm leading-5 text-slate-500">
            <svg x-show="!showSignupPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
            <svg x-show="showSignupPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.41 0 2.766.36 3.96 1.05M12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7a10.05 10.05 0 01-1.875-.175M13.875 18.825L6.125 11.075M12 15a3 3 0 100-6 3 3 0 000 6z"/></svg>
          </button>
          <p class="text-xs text-slate-500 mt-1">Password must have at least 6 characters.</p>
        </div>

        <button type="submit" class="w-full py-2 px-4 rounded-lg bg-rust-500/90 text-white font-semibold hover:bg-rust-600 transition">Sign Up</button>
      </form>
    </div>
  </template>


  <template x-if="isLoggedIn">
    <div class="min-h-dvh flex">

      <aside
        class="w-64 bg-white border-r border-sand-200/70 fixed inset-y-0 left-0 z-30 md:static md:translate-x-0 transform transition-transform duration-200"
        :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'">

        <div class="px-5 pt-6 pb-4 flex items-center gap-3 border-b border-sand-200/70">
          <div class="h-10 w-10 rounded-full bg-rust-500/90 flex items-center justify-center shadow-card">
            <span class="text-white font-semibold">I</span>
          </div>
          <div>
            <div class="text-slate-900 font-semibold">Ignite</div>
            <div class="text-xs text-slate-500">Fall 2025</div>
          </div>
        </div>

        <nav class="p-2 space-y-1 text-sm flex-1 overflow-y-auto">
          <template x-for="item in [
              {k:'dashboard',label:'Dashboard', icon:'M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l-2 2m-2-2v10a1 1 0 01-1 1h-3m-3 0V9a1 1 0 011-1h6a1 1 0 011 1v10a1 1 0 01-1 1h-3'},
              {k:'courses', label:'Courses', icon:'M4 6h16M4 12h16m-7 6h7'},
              {k:'assignments',label:'Assignments', icon:'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'},
              {k:'quizzes', label:'Quizzes & Tests', icon:'M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0l-3 3m7-3v4a2 2 0 002 2h2'},
              {k:'grades', label:'Grades', icon:'M3 6l7-7 7 7M10 3v18'},
              {k:'ai', label:'AI Assistant', icon:'M9.333 9.75a2.5 2.5 0 005.334 0 2.5 2.5 0 00-5.334 0zM12 21a9 9 0 110-18 9 9 0 010 18z'}
            ]" :key="item.k">
            <button
              class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
              :class="page===item.k && 'bg-sand-100 text-slate-900 font-semibold'"
              @click="page=item.k">
              <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" :d="item.icon"/>
              </svg>
              <span x-text="item.label"></span>
            </button>
          </template>
        </nav>

        <div class="p-2 border-t border-sand-200/70">
          <button class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
            :class="page==='profile' && 'bg-sand-100 text-slate-900 font-semibold'"
            @click="page='profile'">
            <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            Profile
          </button>
          <button class="w-full text-left px-3 py-2 rounded flex items-center gap-3 hover:bg-sand-100"
            :class="page==='settings' && 'bg-sand-100 text-slate-900 font-semibold'"
            @click="page='settings'">
            <svg class="h-5 w-5 text-slate-700" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.608 3.3 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            Settings
          </button>

          <div class="mt-3 px-3 pb-3">
            <div class="flex items-center gap-3">
              <div class="h-9 w-9 rounded-full bg-sand-200 grid place-items-center text-slate-600 font-semibold">
                <span x-text="(profile.firstName||'A').slice(0,1)"></span>
              </div>
              <div class="min-w-0">
                <div class="font-medium truncate" x-text="profile.firstName || 'Student'"></div>
                <div class="text-slate-500 text-xs truncate" x-text="profile.email || 'student@university.edu'"></div>
              </div>
            </div>
            <button @click="isLoggedIn = false; document.title = 'Ignite LMS - Login';" class="mt-3 w-full py-1 text-sm rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition">
                Logout
            </button>
          </div>
        </div>
      </aside>


      <main class="flex-1 md:ml-0 ml-0 md:relative md:left-0 left-0">
        <div class="md:hidden sticky top-0 z-20 bg-white/80 backdrop-blur border-b border-sand-200/70">
          <div class="px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <button @click="sidebarOpen=!sidebarOpen" class="p-2 rounded-lg hover:bg-sand-100">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
              </button>
              <div class="font-semibold">Ignite</div>
            </div>
            <div class="text-xs text-slate-500">Fall 2025</div>
          </div>
        </div>

        <div class="max-w-[1200px] mx-auto px-5 sm:px-8 py-8">
          
          <!-- ================= END OF LOGIN PAGE ================= -->
          
          <!-- ================= DASHBOARD TAB ================= -->
        <!-- DASHBOARD (restored with calendar) -->
        <!-- DASHBOARD -->
